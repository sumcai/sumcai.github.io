"use strict";(self.webpackChunkvulkan_doc=self.webpackChunkvulkan_doc||[]).push([[245],{7717:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>a});var o=r(4848),s=r(8453);const l={title:"computer shader\u8be6\u89e3",categories:["Vulkan\u6280\u672f"],tags:["computer shader"],date:new Date("2021-12-08T07:39:25.000Z"),authors:"sumcai",permalink:"/vulkan/compshader/"},c="computer shader\u8be6\u89e3",i={permalink:"/blog/10.computer shader\u8be6\u89e3",source:"@site/blog/10.computer shader\u8be6\u89e3.md",title:"computer shader\u8be6\u89e3",description:"\u4f7f\u7528\u65b9\u5f0f",date:"2021-12-08T07:39:25.000Z",tags:[{inline:!0,label:"computer shader",permalink:"/blog/tags/computer-shader"}],readingTime:1.31,hasTruncateMarker:!1,authors:[{name:"\u82cf\u660e\u624d",title:"Vulkan\u9a71\u52a8\u586b\u5751\u72ee",url:"https://github.com/sumcai",email:"sumcai@163.com",page:{permalink:"/blog/authors/sumcai"},description:"\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb sumcai@163.com",socials:{github:"https://github.com/sumcai"},imageURL:"https://avatars.githubusercontent.com/u/76768485?v=4",key:"sumcai"}],frontMatter:{title:"computer shader\u8be6\u89e3",categories:["Vulkan\u6280\u672f"],tags:["computer shader"],date:"2021-12-08T07:39:25.000Z",authors:"sumcai",permalink:"/vulkan/compshader/"},unlisted:!1,prevItem:{title:"MVP\u53d8\u6362\u5750\u6807",permalink:"/blog/06.MVP\u53d8\u6362\u5750\u6807"},nextItem:{title:"OpenGL\u7eb9\u7406",permalink:"/blog/05.OpenGL\u7eb9\u7406"}},t={authorsImageUrls:[void 0]},a=[{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f",level:2},{value:"WorkGroup\u53c2\u6570\u8bf4\u660e",id:"workgroup\u53c2\u6570\u8bf4\u660e",level:2},{value:"Subgroup\u53c2\u6570\u8bf4\u660e",id:"subgroup\u53c2\u6570\u8bf4\u660e",level:2}];function u(e){const n={code:"code",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u5f0f",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u4ee3\u7801\u4fa7\u8c03\u5ea6\u8ba1\u7b97\u7ba1\u7ebf\u4efb\u52a1"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"vkCmdDIspatch(commandBuffer, groupSize.x, groupSize.y, groupSize.z)"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"groupSize"}),"\u4ee3\u8868\u5de5\u4f5c\u7ec4\u6570\u91cf(xyz\u4e09\u4e2a\u65b9\u5411\u4e0a)"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"shader\u4fa7\u914d\u7f6e\u8bbe\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"layout(local_size_x=6, local_size_y=4) in;"})}),"\n",(0,o.jsxs)(n.p,{children:["\u8bbe\u7f6e\u672c\u5730\u5de5\u4f5c\u7ec4\u5927\u5c0f\uff0c",(0,o.jsx)(n.code,{children:"local_size_z"}),"\u672a\u8bbe\u7f6e\u53d6\u9ed8\u8ba4\u503c1"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"workgroup\u53c2\u6570\u8bf4\u660e",children:"WorkGroup\u53c2\u6570\u8bf4\u660e"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/863e1f0932c954536068441fbcf0534f.png",alt:"1638971538231"})}),"\n",(0,o.jsx)(n.p,{children:"\u4ee5\u4e0a\u56fe\u4e3a\u4f8b"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5168\u5c40\u5de5\u4f5c\u7ec4\uff0c groupSize.x =3 , groupSize.y=4, groupSize.z=8"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_NumWorkGroups"})," \uff1a(3\uff0c4\uff0c8)\uff0c\u5168\u5c40\u5de5\u4f5c\u7ec4\u5927\u5c0f\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_WorkGroupSize"})," \uff1a(6\uff0c4\uff0c1)\uff0c\u672c\u5730\u5de5\u4f5c\u7ec4\u5927\u5c0f\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_WorkGroupID"})," \uff1a\uff082\uff0c2\uff0c4\uff09\uff0c\u672c\u5730\u5de5\u4f5c\u7ec4\u5728\u5168\u5c40\u5de5\u4f5c\u7ec4\u4e2d\u7684\u4f4d\u7f6e\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_LocalInvocationID"})," \uff1a\uff085\uff0c3\uff0c0\uff09\uff0c\u8ba1\u7b97\u5355\u5143\u5728\u672c\u5730\u5de5\u4f5c\u7ec4\u7684\u4f4d\u7f6e\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_GlobalInvocationID"})," \uff1a\uff0817\uff0c11\uff0c4\uff09\uff0c\u8ba1\u7b97\u5355\u5143\u5728\u5168\u5c40\u5de5\u4f5c\u81ea\u7684\u4f4d\u7f6e\uff0cgl_WorkGroupID * gl_WorkGroupSize + gl_LocalInvocationID"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_LocalInvocationIndex"})," \uff1a23\uff0c\u8ba1\u7b97\u5355\u5143\u5728\u672c\u5730\u5de5\u4f5c\u7ec4\u7684\u7d22\u5f15\uff0cgl_LocalInvocationID.z * gl_WorkGroupSize.x * gl_WorkGroupSize.y + gl_LocalInvocationID.y * gl_WorkGroupSize.x +gl_LocalInvocationID.x;"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"subgroup\u53c2\u6570\u8bf4\u660e",children:"Subgroup\u53c2\u6570\u8bf4\u660e"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/c349681166b76d3a822788989b02ac22.png",alt:"1638972921886"})}),"\n",(0,o.jsx)(n.p,{children:"\u5982\u679c\u4e00\u4e2a\u672c\u5730\u5de5\u4f5c\u7ec4\u5206\u6210\u5982\u4e0a\u56fe\u6240\u793a\u7684subgroup\uff0c\u5219\u6709\u5982\u4e0b\u53c2\u6570"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_NumSubgroups"}),"  \uff1a8\uff0c\u672c\u5730\u5de5\u4f5c\u7ec4\u5185\u7684\u5b50\u7ec4\u6570"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_SubgroupID"}),"  \uff1a[0\uff0c7]\uff0c\u672c\u5730\u5de5\u4f5c\u7ec4\u5185\u5b50\u7ec4\u7684ID\uff0c\u8303\u56f4[0\uff0cgl_NumSubgroups)"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_SubgroupSize"}),"  \uff1a32\uff0c\u5b50\u7ec4\u7684\u5bb9\u91cf\u5927\u5c0f"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gl_SubgroupInvocationID"}),"  \uff1a[0\uff0c31]\uff0c\u5b50\u7ec4\u5185\u8ba1\u7b97\u5355\u5143\u7684ID\uff0c\u8303\u56f4[0\uff0cgl_SubgroupSize)"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var o=r(6540);const s={},l=o.createContext(s);function c(e){const n=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);