"use strict";(self.webpackChunkvulkan_doc=self.webpackChunkvulkan_doc||[]).push([[2745],{2709:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var s=r(4848),i=r(8453);const t={title:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",description:"\u4ecb\u7ecd\u5982\u4f55\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",date:new Date("2024-10-09T00:00:00.000Z")},a="\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",l={id:"usage/map_data_to_shader",title:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",description:"\u4ecb\u7ecd\u5982\u4f55\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",source:"@site/docs/usage/17-map_data_to_shader.md",sourceDirName:"usage",slug:"/usage/map_data_to_shader",permalink:"/usage/map_data_to_shader",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:17,frontMatter:{title:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",description:"\u4ecb\u7ecd\u5982\u4f55\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",date:"2024-10-09T00:00:00.000Z"},sidebar:"VulkanDoc",previous:{title:"\u6df1\u5ea6",permalink:"/usage/depth"},next:{title:"\u9876\u70b9\u6570\u636e\u7684\u5904\u7406",permalink:"/usage/vertex_input_data"}},o={},c=[{value:"\u8f93\u5165\u5c5e\u6027",id:"\u8f93\u5165\u5c5e\u6027",level:2},{value:"\u63cf\u8ff0\u7b26",id:"\u63cf\u8ff0\u7b26",level:2},{value:"\u4e3e\u4f8b",id:"\u4e3e\u4f8b",level:3},{value:"\u63cf\u8ff0\u7b26\u7c7b\u578b",id:"\u63cf\u8ff0\u7b26\u7c7b\u578b",level:3},{value:"\u5b58\u50a8\u56fe\u50cf\uff08Storage Image\uff09",id:"\u5b58\u50a8\u56fe\u50cfstorage-image",level:4},{value:"\u91c7\u6837\u5668\u548c\u91c7\u6837\u56fe\u50cf\uff08Sampler and Sampled Image\uff09",id:"\u91c7\u6837\u5668\u548c\u91c7\u6837\u56fe\u50cfsampler-and-sampled-image",level:4},{value:"\u7ec4\u5408\u56fe\u50cf\u91c7\u6837\u5668\uff08Combined Image Sampler\uff09",id:"\u7ec4\u5408\u56fe\u50cf\u91c7\u6837\u5668combined-image-sampler",level:4},{value:"\u7edf\u4e00\u7f13\u51b2\u533a\uff08Uniform Buffer\uff09",id:"\u7edf\u4e00\u7f13\u51b2\u533auniform-buffer",level:4},{value:"\u5b58\u50a8\u7f13\u51b2\u533a\uff08Storage Buffer\uff09",id:"\u5b58\u50a8\u7f13\u51b2\u533astorage-buffer",level:4},{value:"\u7edf\u4e00\u7eb9\u7d20\u7f13\u51b2\u533a\uff08Uniform Texel Buffer\uff09",id:"\u7edf\u4e00\u7eb9\u7d20\u7f13\u51b2\u533auniform-texel-buffer",level:4},{value:"\u5b58\u50a8\u7eb9\u7d20\u7f13\u51b2\u533a\uff08Storage Texel Buffer\uff09",id:"\u5b58\u50a8\u7eb9\u7d20\u7f13\u51b2\u533astorage-texel-buffer",level:4},{value:"\u8f93\u5165\u9644\u4ef6\uff08Input Attachment\uff09",id:"\u8f93\u5165\u9644\u4ef6input-attachment",level:4},{value:"\u63a8\u9001\u5e38\u91cf\uff08Push Constants\uff09",id:"\u63a8\u9001\u5e38\u91cfpush-constants",level:2},{value:"\u7279\u6b8a\u5e38\u91cf",id:"\u7279\u6b8a\u5e38\u91cf",level:2},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50",level:3},{value:"3 \u79cd\u7279\u6b8a\u5e38\u91cf\u7684\u7528\u6cd5",id:"3-\u79cd\u7279\u6b8a\u5e38\u91cf\u7684\u7528\u6cd5",level:3},{value:"\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a",id:"\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a",level:2},{value:"\u9650\u5236",id:"\u9650\u5236",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668",children:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"\u6240\u6709 SPIR-V \u5185\u5bb9\u90fd\u662f\u7528 glslangValidator \u751f\u6210\u7684\u3002"})}),"\n",(0,s.jsxs)(n.p,{children:["\u672c\u7ae0\u5c06\u4ecb\u7ecd ",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#interfaces",children:"Vulkan \u4e2d\u7684 SPIR-V"})," \u4e0e shader \u8fdb\u884c\u6570\u636e\u6620\u5c04\u7684\u65b9\u6cd5\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4ece ",(0,s.jsx)(n.code,{children:"vkAllocateMemory"})," \u7533\u8bf7\u7684 ",(0,s.jsx)(n.code,{children:"VkDeviceMemory"})," \u6765\u6620\u5c04\u6570\u636e\uff0c\u8ba9 SPIR-V \u7740\u8272\u5668\u77e5\u9053\u600e\u4e48\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5728 Vulkan \u6838\u5fc3\u529f\u80fd\u4e2d\uff0c\u4e3b\u8981\u6709 5 \u79cd\u65b9\u6cd5\u5c06\u6570\u636e\u4ece\u7a0b\u5e8f\u6620\u5c04\u5230 SPIR-V \u4e2d\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#input-attributes",children:"\u8f93\u5165\u5c5e\u6027"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#descriptors",children:"\u63cf\u8ff0\u7b26"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#descriptor-types",children:"\u63cf\u8ff0\u7b26\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#storage-image",children:"VK_DESCRIPTOR_TYPE_STORAGE_IMAGE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#sampler-and-sampled-image",children:"VK_DESCRIPTOR_TYPE_SAMPLER \u548c VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#combined-image-sampler",children:"VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#uniform-buffer",children:"VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#storage-buffer",children:"VK_DESCRIPTOR_TYPE_STORAGE_BUFFER"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#uniform-texel-buffer",children:"VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#storage-texel-buffer",children:"VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#input-attachment",children:"VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#push-constants-shaders",children:"\u63a8\u9001\u5e38\u91cf"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#specialization-constants",children:"\u7279\u6b8a\u5316\u5e38\u91cf"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/mapping_data_to_shaders.html#physical-storage-buffer",children:"\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u8f93\u5165\u5c5e\u6027",children:"\u8f93\u5165\u5c5e\u6027"}),"\n",(0,s.jsxs)(n.p,{children:["Vulkan \u4e2d\u552f\u4e00\u5177\u6709\u8f93\u5165\u5c5e\u6027\u7684\u7740\u8272\u5668\u9636\u6bb5\u662f\u9876\u70b9\u7740\u8272\u5668 ( ",(0,s.jsx)(n.code,{children:"VK_SHADER_STAGE_VERTEX_BIT"}),")\uff0c\u9700\u8981\u5728\u521b\u5efa",(0,s.jsx)(n.code,{children:"VkPipeline"}),"\u65f6\u663e\u5f0f\u58f0\u660e\uff0c\u7136\u540e\u5728\u7ed8\u5236\u524d\u5c06 ",(0,s.jsx)(n.code,{children:"VkBuffer"})," \u7ed1\u5b9a\u5230\u8981\u6620\u5c04\u7684\u6570\u636e\u3002\u5176\u4ed6\u7740\u8272\u5668\u9636\u6bb5\uff08\u4f8b\u5982\u7247\u6bb5\u7740\u8272\u5668\uff09\u4e5f\u6709\u8f93\u5165\u5c5e\u6027\uff0c\u4f46\u503c\u662f\u7531\u5728\u5b83\u4e4b\u524d\u8fd0\u884c\u7684\u9636\u6bb5\u8f93\u51fa\u7684\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u8c03\u7528",(0,s.jsx)(n.code,{children:"vkCreateGraphicsPipelines"}),"\u4e4b\u524d \uff0c",(0,s.jsx)(n.code,{children:"VkPipelineVertexInputStateCreateInfo"})," \u9700\u8981\u586b\u5165",(0,s.jsx)(n.code,{children:"VkVertexInputAttributeDescription"})," \u6570\u7ec4\uff0c\u6765\u6620\u5c04\u8f93\u5165\u5c5e\u6027\u5230\u7740\u8272\u5668\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"GLSL \u9876\u70b9\u7740\u8272\u5668\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"#version 450\nlayout(location = 0) in vec3 inPosition;\n\nvoid main() {\n    gl_Position = vec4(inPosition, 1.0);\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"location 0 \u5904\u53ea\u6709\u4e00\u4e2a\u8f93\u5165\u5c5e\u6027\uff0c\u5bf9\u5e94\u751f\u6210\u7684 SPIR-V\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:'                Name 18  "inPosition"\n                Decorate 18(inPosition) Location 0\n\n            17: TypePointer Input 16(fvec3)\n18(inPosition): 17(ptr) Variable Input\n            19: 16(fvec3) Load 18(inPosition)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,s.jsx)(n.code,{children:"VkVertexInputAttributeDescription"}),"\u7684\u5185\u5bb9\u4e3a\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"VkVertexInputAttributeDescription input = {};\ninput.location = 0;\ninput.binding  = 0;\ninput.format   = VK_FORMAT_R32G32B32_SFLOAT; // maps to vec3\ninput.offset   = 0;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u9762\u8981\u505a\u7684\u662f\u5728\u8c03\u7528\u7ed8\u5236\u524d\u7ed1\u5b9a\u9876\u70b9\u7f13\u51b2\u533a\u548c\u7d22\u5f15\u7f13\u51b2\u533a\uff08\u53ef\u9009\uff09\u3002"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u201c\u9876\u70b9\u7f13\u51b2\u533a\u201d\u9700\u5728\u521b\u5efa ",(0,s.jsx)(n.code,{children:"VkBuffer"})," \u65f6\u4f7f\u7528",(0,s.jsx)(n.code,{children:"VK_BUFFER_USAGE_VERTEX_BUFFER_BIT"})," \u3002"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"vkBeginCommandBuffer();\n// ...\nvkCmdBindVertexBuffer();\nvkCmdDraw();\n// ...\nvkCmdBindVertexBuffer();\nvkCmdBindIndexBuffer();\nvkCmdDrawIndexed();\n// ...\nvkEndCommandBuffer();\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u66f4\u591a\u4fe1\u606f\u8bf7\u9605\u8bfb",(0,s.jsx)(n.a,{href:"/vertex_input_data_processing.html#vertex-input-data-processing",children:"\u9876\u70b9\u8f93\u5165\u6570\u636e\u5904\u7406\u8fc7\u7a0b"}),"\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u63cf\u8ff0\u7b26",children:"\u63cf\u8ff0\u7b26"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#descriptorsets",children:"\u8d44\u6e90\u63cf\u8ff0\u7b26"})," \u662f\u5c06\u7edf\u4e00\u7f13\u51b2\u533a\uff08uniform buffer\uff09\u3001\u5b58\u50a8\u7f13\u51b2\u533a\uff08storage buffer\uff09\u3001\u91c7\u6837\u5668\u7b49\u6570\u636e\u6620\u5c04\u5230\u4efb\u4f55\u7740\u8272\u5668\u9636\u6bb5\u7684\u4e3b\u8981\u65b9\u6cd5\u3002\u63cf\u8ff0\u7b26\u4e00\u79cd\u7684\u62bd\u8c61\u7406\u89e3\u662f\u7740\u8272\u5668\u53ef\u4ee5\u4f7f\u7528\u7684\u5185\u5b58\u6307\u9488\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["Vulkan \u4e2d\u6709\u5404\u79cd ",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#VkDescriptorType",children:"\u63cf\u8ff0\u7b26\u7c7b\u578b"}),"\uff0cVulkan Spec\u6709\u6bcf\u79cd\u63cf\u8ff0\u7b26\u7c7b\u578b\u7684",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#descriptorsets-types",children:"\u8be6\u7ec6\u63cf\u8ff0"}),"\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u63cf\u8ff0\u7b26\u88ab\u5206\u7ec4\u5230 ",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#descriptorsets-sets",children:"\u63cf\u8ff0\u7b26"})," \u96c6\u5408\u4e2d\uff0c\u63cf\u8ff0\u7b26\u96c6\u5408\u7ed1\u5b9a\u5230\u7740\u8272\u5668\uff0c\u5373\u4f7f\u63cf\u8ff0\u7b26\u96c6\u4e2d\u53ea\u6709\u4e00\u4e2a\u63cf\u8ff0\u7b26\uff0c\u4e5f\u8981\u7ed1\u5b9a\u6574\u4e2a",(0,s.jsx)(n.code,{children:"VkDescriptorSet"})," \u5230\u7740\u8272\u5668\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4e3e\u4f8b",children:"\u4e3e\u4f8b"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u4f8b\u4e2d\u6709 3 \u4e2a\u63cf\u8ff0\u7b26\u96c6\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://docs.vulkan.org/guide/latest/_images/mapping_data_to_shaders_descriptor_1.png",alt:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668\u63cf\u8ff0\u7b26"})}),"\n",(0,s.jsx)(n.p,{children:"\u7740\u8272\u5668\u7684 GLSL\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"// Note - only set 0 and 2 are used in this shader\n\nlayout(set = 0, binding = 0) uniform sampler2D myTextureSampler;\n\nlayout(set = 0, binding = 2) uniform uniformBuffer0 {\n    float someData;\n} ubo_0;\n\nlayout(set = 0, binding = 3) uniform uniformBuffer1 {\n    float moreData;\n} ubo_1;\n\nlayout(set = 2, binding = 0) buffer storageBuffer {\n    float myResults;\n} ssbo;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u76f8\u5e94\u7684 SPIR-V\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"Decorate 19(myTextureSampler) DescriptorSet 0\nDecorate 19(myTextureSampler) Binding 0\n\nMemberDecorate 29(uniformBuffer0) 0 Offset 0\nDecorate 29(uniformBuffer0) Block\nDecorate 31(ubo_0) DescriptorSet 0\nDecorate 31(ubo_0) Binding 2\n\nMemberDecorate 38(uniformBuffer1) 0 Offset 0\nDecorate 38(uniformBuffer1) Block\nDecorate 40(ubo_1) DescriptorSet 0\nDecorate 40(ubo_1) Binding 3\n\nMemberDecorate 44(storageBuffer) 0 Offset 0\nDecorate 44(storageBuffer) BufferBlock\nDecorate 46(ssbo) DescriptorSet 2\nDecorate 46(ssbo) Binding 0\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u63cf\u8ff0\u7b26\u7684\u7ed1\u5b9a\u662f\u5728\u8bb0\u5f55\u547d\u4ee4\u7f13\u51b2\u533a\u65f6\u5b8c\u6210\u7684\uff0c\u63cf\u8ff0\u7b26\u5fc5\u987b\u5728\u8c03\u7528draw/dispatch\u65f6\u7ed1\u5b9a\uff0c\u4ee5\u4e0b\u4f2a\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"vkBeginCommandBuffer();\n// ...\nvkCmdBindPipeline(); // Binds shader\n\n// One possible way of binding the two sets\nvkCmdBindDescriptorSets(firstSet = 0, pDescriptorSets = &descriptor_set_c);\nvkCmdBindDescriptorSets(firstSet = 2, pDescriptorSets = &descriptor_set_b);\n\nvkCmdDraw(); // or dispatch\n// ...\nvkEndCommandBuffer();\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7ed1\u5b9a\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://docs.vulkan.org/guide/latest/_images/mapping_data_to_shaders_descriptor_2.png",alt:"\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668\u63cf\u8ff0\u7b26 2.png"})}),"\n",(0,s.jsx)(n.h3,{id:"\u63cf\u8ff0\u7b26\u7c7b\u578b",children:"\u63cf\u8ff0\u7b26\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.p,{children:["Vulkan Spec \u6709\u4e00\u4e2a ",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#interfaces-resources-storage-class-correspondence",children:"\u7740\u8272\u5668\u8d44\u6e90\u548c\u5b58\u50a8\u5bf9\u5e94\u7c7b\u522b"})," \u8868\uff0c\u63cf\u8ff0\u4e86\u6bcf\u4e2a\u63cf\u8ff0\u7b26\u7c7b\u578b\u9700\u8981\u5982\u4f55\u6620\u5c04\u5230 SPIR-V\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u9762\u5c55\u793a\u4e86 GLSL \u548c SPIR-V \u6620\u5c04\u5230\u6bcf\u4e2a",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#descriptorsets-types",children:"\u63cf\u8ff0\u7b26\u7c7b\u578b"})," \u7684\u793a\u4f8b\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5bf9\u4e8e GLSL\uff0c\u66f4\u591a\u4fe1\u606f\u53c2\u9605\uff1a ",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.pdf",children:"GLSL Spec - 12.2.4. Vulkan Only: Samplers, Images, Textures, and Buffers"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u5b58\u50a8\u56fe\u50cfstorage-image",children:"\u5b58\u50a8\u56fe\u50cf\uff08Storage Image\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_STORAGE_IMAGE\n// VK_FORMAT_R32_UINT\nlayout(set = 0, binding = 0, r32ui) uniform uimage2D storageImage;\n\n// example usage for reading and writing in GLSL\nconst uvec4 texel = imageLoad(storageImage, ivec2(0, 0));\nimageStore(storageImage, ivec2(1, 1), texel);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %storageImage DescriptorSet 0\nOpDecorate %storageImage Binding 0\n\n%r32ui        = OpTypeImage %uint 2D 0 0 0 2 R32ui\n%ptr          = OpTypePointer UniformConstant %r32ui\n%storageImage = OpVariable %ptr UniformConstant\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u91c7\u6837\u5668\u548c\u91c7\u6837\u56fe\u50cfsampler-and-sampled-image",children:"\u91c7\u6837\u5668\u548c\u91c7\u6837\u56fe\u50cf\uff08Sampler and Sampled Image\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_SAMPLER`\u548c`VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE\nlayout(set = 0, binding = 0) uniform sampler samplerDescriptor;\nlayout(set = 0, binding = 1) uniform texture2D sampledImage;\n\n// example usage of using texture() in GLSL\nvec4 data = texture(sampler2D(sampledImage,  samplerDescriptor), vec2(0.0, 0.0));\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %sampledImage DescriptorSet 0\nOpDecorate %sampledImage Binding 1\nOpDecorate %samplerDescriptor DescriptorSet 0\nOpDecorate %samplerDescriptor Binding 0\n\n%image        = OpTypeImage %float 2D 0 0 0 1 Unknown\n%imagePtr     = OpTypePointer UniformConstant %image\n%sampledImage = OpVariable %imagePtr UniformConstant\n\n%sampler           = OpTypeSampler\n%samplerPtr        = OpTypePointer UniformConstant %sampler\n%samplerDescriptor = OpVariable %samplerPtr UniformConstant\n\n%imageLoad       = OpLoad %image %sampledImage\n%samplerLoad     = OpLoad %sampler %samplerDescriptor\n\n%sampleImageType = OpTypeSampledImage %image\n%1               = OpSampledImage %sampleImageType %imageLoad %samplerLoad\n\n%textureSampled = OpImageSampleExplicitLod %v4float %1 %coordinate Lod %float_0\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7ec4\u5408\u56fe\u50cf\u91c7\u6837\u5668combined-image-sampler",children:"\u7ec4\u5408\u56fe\u50cf\u91c7\u6837\u5668\uff08Combined Image Sampler\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5728\u67d0\u4e9b\u9a71\u52a8\u5b9e\u73b0\u4e2d\uff0c\u4f7f\u7528\u7ec4\u5408\u56fe\u50cf\u91c7\u6837\u5668\u6765\u8fdb\u884c\u56fe\u50cf\u91c7\u6837 ",(0,s.jsx)(n.strong,{children:"\u53ef\u80fd\u6027\u80fd\u66f4\u9ad8\u3002"})]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"layout(set = 0, binding = 0) uniform sampler2D combinedImageSampler;\n\n// example usage of using texture() in GLSL\nvec4 data = texture(combinedImageSampler, vec2(0.0, 0.0));\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %combinedImageSampler DescriptorSet 0\nOpDecorate %combinedImageSampler Binding 0\n\n%imageType            = OpTypeImage %float 2D 0 0 0 1 Unknown\n%sampleImageType      = OpTypeSampledImage imageType\n%ptr                  = OpTypePointer UniformConstant %sampleImageType\n%combinedImageSampler = OpVariable %ptr UniformConstant\n\n%load           = OpLoad %sampleImageType %combinedImageSampler\n%textureSampled = OpImageSampleExplicitLod %v4float %load %coordinate Lod %float_0\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7edf\u4e00\u7f13\u51b2\u533auniform-buffer",children:"\u7edf\u4e00\u7f13\u51b2\u533a\uff08Uniform Buffer\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u7edf\u4e00\u7f13\u51b2\u533a",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/descriptor_dynamic_offset.html",children:"\u5728\u7ed1\u5b9a\u65f6\u53ef\u4ee5\u52a8\u6001\u504f\u79fb"}),"\uff08VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC\uff09"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"layout(set = 0, binding = 0) uniform uniformBuffer {\n    float a;\n    int b;\n} ubo;\n\n// example of reading from UBO in GLSL\nint x = ubo.b + 1;\nvec3 y = vec3(ubo.a);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpMemberDecorate %uniformBuffer 0 Offset 0\nOpMemberDecorate %uniformBuffer 1 Offset 4\nOpDecorate %uniformBuffer Block\nOpDecorate %ubo DescriptorSet 0\nOpDecorate %ubo Binding 0\n\n%uniformBuffer = OpTypeStruct %float %int\n%ptr           = OpTypePointer Uniform %uniformBuffer\n%ubo           = OpVariable %ptr Uniform\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b58\u50a8\u7f13\u51b2\u533astorage-buffer",children:"\u5b58\u50a8\u7f13\u51b2\u533a\uff08Storage Buffer\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_STORAGE_BUFFER\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5b58\u50a8\u7f13\u51b2\u533a",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/descriptor_dynamic_offset.html",children:"\u5728\u7ed1\u5b9a\u65f6\u53ef\u4ee5\u52a8\u6001\u504f\u79fb"}),"\uff08VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC\uff09"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"layout(set = 0, binding = 0) buffer storageBuffer {\n    float a;\n    int b;\n} ssbo;\n\n// example of reading and writing SSBO in GLSL\nssbo.a = ssbo.a + 1.0;\nssbo.b = ssbo.b + 1;\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"BufferBlock"})," \u548c ",(0,s.jsx)(n.code,{children:"Uniform"})," \u5185\u5bb9\u8bf7\u9605\u8bfb ",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/extensions/shader_features.html#VK_KHR_storage_buffer_storage_class",children:"VK_KHR_storage_buffer_storage_class"})]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpMemberDecorate %storageBuffer 0 Offset 0\nOpMemberDecorate %storageBuffer 1 Offset 4\nOpDecorate %storageBuffer Block\nOpDecorate %ssbo DescriptorSet 0\nOpDecorate %ssbo Binding 0\n\n%storageBuffer = OpTypeStruct %float %int\n%ptr           = OpTypePointer StorageBuffer %storageBuffer\n%ssbo          = OpVariable %ptr StorageBuffer\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7edf\u4e00\u7eb9\u7d20\u7f13\u51b2\u533auniform-texel-buffer",children:"\u7edf\u4e00\u7eb9\u7d20\u7f13\u51b2\u533a\uff08Uniform Texel Buffer\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER\nlayout(set = 0, binding = 0) uniform textureBuffer uniformTexelBuffer;\n\n// example of reading texel buffer in GLSL\nvec4 data = texelFetch(uniformTexelBuffer, 0);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %uniformTexelBuffer DescriptorSet 0\nOpDecorate %uniformTexelBuffer Binding 0\n\n%texelBuffer        = OpTypeImage %float Buffer 0 0 0 1 Unknown\n%ptr                = OpTypePointer UniformConstant %texelBuffer\n%uniformTexelBuffer = OpVariable %ptr UniformConstant\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b58\u50a8\u7eb9\u7d20\u7f13\u51b2\u533astorage-texel-buffer",children:"\u5b58\u50a8\u7eb9\u7d20\u7f13\u51b2\u533a\uff08Storage Texel Buffer\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER\n// VK_FORMAT_R8G8B8A8_UINT\nlayout(set = 0, binding = 0, rgba8ui) uniform uimageBuffer storageTexelBuffer;\n\n// example of reading and writing texel buffer in GLSL\nint offset = int(gl_GlobalInvocationID.x);\nvec4 data = imageLoad(storageTexelBuffer, offset);\nimageStore(storageTexelBuffer, offset, uvec4(0));\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %storageTexelBuffer DescriptorSet 0\nOpDecorate %storageTexelBuffer Binding 0\n\n%rgba8ui            = OpTypeImage %uint Buffer 0 0 0 2 Rgba8ui\n%ptr                = OpTypePointer UniformConstant %rgba8ui\n%storageTexelBuffer = OpVariable %ptr UniformConstant\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8f93\u5165\u9644\u4ef6input-attachment",children:"\u8f93\u5165\u9644\u4ef6\uff08Input Attachment\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT\nlayout (input_attachment_index = 0, set = 0, binding = 0) uniform subpassInput inputAttachment;\n\n// example loading the attachment data in GLSL\nvec4 data = subpassLoad(inputAttachment);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"OpDecorate %inputAttachment DescriptorSet 0\nOpDecorate %inputAttachment Binding 0\nOpDecorate %inputAttachment InputAttachmentIndex 0\n\n%subpass         = OpTypeImage %float SubpassData 0 0 0 2 Unknown\n%ptr             = OpTypePointer UniformConstant %subpass\n%inputAttachment = OpVariable %ptr UniformConstant\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u63a8\u9001\u5e38\u91cfpush-constants",children:"\u63a8\u9001\u5e38\u91cf\uff08Push Constants\uff09"}),"\n",(0,s.jsx)(n.p,{children:"\u63a8\u9001\u5e38\u91cf\u662f\u5728\u7740\u8272\u5668\u4e2d\u53ef\u8bbf\u95ee\u7684\u4e00\u7ec4\u5e38\u91cf\u503c\uff0c\u5e94\u7528\u7a0b\u5e8f\u65e0\u9700\u521b\u5efa\u7f13\u51b2\u533a\u6216\u4fee\u6539\u548c\u7ed1\u5b9a\u66f4\u65b0\u7684\u63cf\u8ff0\u7b26\u96c6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe\u7f6e\u7740\u8272\u5668\u4e2d\u4f7f\u7528\u7684\u503c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u79cd\u8bbe\u8ba1\u7528\u4e8e\u5728\u547d\u4ee4\u7f13\u51b2\u533a\u8bb0\u5f55\u65f6\u9ad8\u9891\u66f4\u65b0\u5c11\u91cf\uff08\u51e0\u4e2a\u5b57\u8282\uff09\u6570\u636e\u7684\u573a\u666f\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u66f4\u591a\u4fe1\u606f\u53ef\u4ee5\u5728 ",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/push_constants.html#push-constants",children:"Push Constants"})," \u7ae0\u8282\u4e2d\u627e\u5230\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7279\u6b8a\u5e38\u91cf",children:"\u7279\u6b8a\u5e38\u91cf"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#pipelines-specialization-constants",children:"\u7279\u6b8a\u5e38\u91cf"})," \u662f\u4e00\u79cd\u5141\u8bb8\u5728\u521b\u5efa",(0,s.jsx)(n.code,{children:"VkPipeline"}),"\u65f6\u6307\u5b9a SPIR-V \u4e2d\u7684\u5e38\u91cf\u503c\u7684\u673a\u5236\uff0c\u8fd9\u4e2a\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u56e0\u4e3a\u5b83\u53d6\u4ee3\u4e86\u5728\u9ad8\u7ea7\u7740\u8272\u8bed\u8a00\uff08GLSL\u3001HLSL \u7b49\uff09\u4e2d\u6267\u884c\u9884\u5904\u7406\u5668\u5b8f\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f8b\u5b50",children:"\u4f8b\u5b50"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u521b\u5efa\u7684 ",(0,s.jsx)(n.code,{children:"VkPipeline"})," \u7684\u6bcf\u4e2ashader\u7684\u989c\u8272\u503c\u4e0d\u540c\uff0c\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u4e24\u4e2a\u7740\u8272\u5668\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"// shader_a.frag\n#version 450\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n    outColor = vec4(0.0);\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"// shader_b.frag\n#version 450\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n    outColor = vec4(1.0);\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528\u7279\u6b8a\u5e38\u91cf\uff0c\u53ef\u4ee5\u5728\u8c03\u7528",(0,s.jsx)(n.code,{children:"vkCreateGraphicsPipelines"}),"\u7f16\u8bd1\u7740\u8272\u5668\u65f6\u505a\u51fa\u9009\u62e9 \uff0c\u56e0\u6b64\u53ea\u9700\u8981\u4e00\u4e2a\u7740\u8272\u5668\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-glsl",children:"#version 450\nlayout (constant_id = 0) const float myColor = 1.0;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n    outColor = vec4(myColor);\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6700\u7ec8\u7684 SPIR-V \uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-spswiftirv",children:"                      Decorate 9(outColor) Location 0\n                      Decorate 10(myColor) SpecId 0\n\n                      // 0x3f800000 as decimal which is 1.0 for a 32 bit float\n10(myColor): 6(float) SpecConstant 1065353216\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8be5\u503c\u5728\u7740\u8272\u5668\u5185\u4ecd\u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u4f46\u662f\u5982\u679c\u53e6\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"VkPipeline"})," \u4f7f\u7528\u76f8\u540c\u7684\u7740\u8272\u5668\uff0c\u60f3\u8981\u5c06 ",(0,s.jsx)(n.code,{children:"myColor"})," \u8bbe\u7f6e\u4e3a ",(0,s.jsx)(n.code,{children:"0.5f"}),"\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"struct myData {\n    float myColor = 1.0f;\n} myData;\n\nVkSpecializationMapEntry mapEntry = {};\nmapEntry.constantID = 0; // matches constant_id in GLSL and SpecId in SPIR-V\nmapEntry.offset     = 0;\nmapEntry.size       = sizeof(float);\n\nVkSpecializationInfo specializationInfo = {};\nspecializationInfo.mapEntryCount = 1;\nspecializationInfo.pMapEntries   = &mapEntry;\nspecializationInfo.dataSize      = sizeof(myData);\nspecializationInfo.pData         = &myData;\n\nVkGraphicsPipelineCreateInfo pipelineInfo = {};\npipelineInfo.pStages[fragIndex].pSpecializationInfo = &specializationInfo;\n\n// Create first pipeline with myColor as 1.0\nvkCreateGraphicsPipelines(&pipelineInfo);\n\n// Create second pipeline with same shader, but sets different value\nmyData.myColor = 0.5f;\nvkCreateGraphicsPipelines(&pipelineInfo);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7b2c\u4e8c\u4e2a",(0,s.jsx)(n.code,{children:"VkPipeline"})," \u7684\u7740\u8272\u5668\u89e3\u6790",(0,s.jsx)(n.code,{children:"myColor"}),"\u65f6\u5c06\u4f7f\u7528\u65b0\u5e38\u6570\u503c ",(0,s.jsx)(n.code,{children:"0.5f"}),"\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"3-\u79cd\u7279\u6b8a\u5e38\u91cf\u7684\u7528\u6cd5",children:"3 \u79cd\u7279\u6b8a\u5e38\u91cf\u7684\u7528\u6cd5"}),"\n",(0,s.jsx)(n.p,{children:"\u7279\u6b8a\u5e38\u91cf\u901a\u5e38\u6709\u4ee5\u4e0b\u4e09\u79cd\u7528\u6cd5\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5207\u6362\u529f\u80fd","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u76f4\u5230\u8fd0\u884c\u65f6\u624d\u77e5\u9053 Vulkan \u662f\u5426\u652f\u6301\u67d0\u9879\u529f\u80fd\uff0c\u5d4c\u5165\u4e00\u4e2a\u8fd0\u884c\u65f6\u7684\u5e38\u91cf\u51b3\u7b56\u4ece\u800c\u907f\u514d\u7f16\u5199\u4e24\u4e2a\u5355\u72ec\u7684\u7740\u8272\u5668\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6539\u5584\u540e\u7aef\u4f18\u5316","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8fd9\u91cc\u7684\u201c\u540e\u7aef\u201d\u6307\u7684\u662f\u7f16\u8bd1\u5668\uff0c\u5b83\u5c06 SPIR-V \u89e3\u6790\u4e3a\u5728\u8bbe\u5907\u4e0a\u8fd0\u884c\u7684\u4f4e\u4ee3\u7801\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u5e38\u91cf\u503c\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u4f18\u5316\uff0c\u4f8b\u5982 ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Constant_folding",children:"\u5e38\u91cf\u6298\u53e0"}),"\u3001",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Dead_code_elimination",children:"\u53bb\u9664\u6b7b\u4ee3\u7801\u7b49"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u51cf\u5c0f\u7c7b\u578b\u548c\u5185\u5b58\u5927\u5c0f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ef\u4ee5\u901a\u8fc7\u7279\u6b8a\u5e38\u91cf\u8bbe\u7f6e\u4f7f\u7528\u7684\u6570\u7ec4\u6216\u53d8\u91cf\u7c7b\u578b\u7684\u957f\u5ea6\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f16\u8bd1\u5668\u9700\u8981\u6839\u636e\u8fd9\u4e9b\u7c7b\u578b\u548c\u5927\u5c0f\u6765\u5206\u914d\u5bc4\u5b58\u5668\uff0c\u5982\u679c\u5206\u914d\u7684\u5bc4\u5b58\u5668\u5dee\u5f02\u5f88\u5927\uff0c\u7ba1\u7ebf\u7f13\u5b58\u5f88\u53ef\u80fd\u4f1a\u5931\u8d25\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a",children:"\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a"}),"\n",(0,s.jsxs)(n.p,{children:["Vulkan 1.2 \u7684",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/man/html/VK_KHR_buffer_device_address.html#_description",children:"VK_KHR_buffer_device_address"})," \u6269\u5c55\u6dfb\u52a0\u4e86\u201c\u7740\u8272\u5668\u4e2d\u7684\u6307\u9488\u201d\u529f\u80fd\u3002\u4f7f\u7528SPIR-V \u4e2d\u7684 ",(0,s.jsx)(n.code,{children:"PhysicalStorageBuffer"})," \u5b58\u50a8\u7c7b\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"vkGetBufferDeviceAddress"})," \u8fd4\u56de\u5185\u5b58\u7684 ",(0,s.jsx)(n.code,{children:"VkDeviceAddress"})," \u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u4e5f\u662f\u5c06\u6570\u636e\u6620\u5c04\u5230\u7740\u8272\u5668\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u60f3\u8981\u5c06\u5176\u4e0e\u7edf\u4e00\u7f13\u51b2\u533a\u4e00\u8d77\u4f7f\u7528\uff0c\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a\u540c\u65f6\u5177\u6709 ",(0,s.jsx)(n.code,{children:"VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT"})," \u548c ",(0,s.jsx)(n.code,{children:"VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT"}),"\u7684 ",(0,s.jsx)(n.code,{children:"VkBuffer"}),"\uff0cVulkan \u5c06\u4f7f\u7528\u63cf\u8ff0\u7b26\u4e0e\u7740\u8272\u5668\u4ea4\u4e92\uff0c\u968f\u540e\u53ef\u4ee5\u4f7f\u7528\u7269\u7406\u5b58\u50a8\u7f13\u51b2\u533a\u6765\u66f4\u65b0\u503c\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u9650\u5236",children:"\u9650\u5236"}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5\u4e0a\u7684\u793a\u4f8b\uff0c\u8fd8\u5b58\u5728\u4e00\u4e9b",(0,s.jsx)(n.a,{href:"https://registry.khronos.org/vulkan/specs/1.3-extensions/html/vkspec.html#limits",children:"\u4f7f\u7528\u9650\u5236"}),"\uff0c\u9650\u5236\u4e00\u6b21\u53ef\u4ee5\u7ed1\u5b9a\u591a\u5c11\u6570\u636e\uff0c\u8fd9\u4e9b\u9650\u5236\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u8f93\u5165\u5c5e\u6027","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxVertexInputAttributes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxVertexInputAttributeOffset"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u63cf\u8ff0\u7b26","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxBoundDescriptorSets"})}),"\n",(0,s.jsx)(n.li,{children:"\u6bcf\u9636\u6bb5\u9650\u5236"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorSamplers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorUniformBuffers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorStorageBuffers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorSampledImages"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorStorageImages"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageDescriptorInputAttachments"})}),"\n",(0,s.jsx)(n.li,{children:"\u6bcf\u4e2a\u7c7b\u578b\u9650\u5236"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxPerStageResources"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetSamplers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetUniformBuffers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetUniformBuffersDynamic"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetStorageBuffers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetStorageBuffersDynamic"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetSampledImages"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetStorageImages"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"maxDescriptorSetInputAttachments"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"VkPhysicalDeviceDescriptorIndexingProperties"})," \uff08\u4f7f\u7528\u4e86 ",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/extensions/VK_EXT_descriptor_indexing.html#VK_EXT_descriptor_indexing",children:"\u63cf\u8ff0\u7b26\u7d22\u5f15"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"VkPhysicalDeviceInlineUniformBlockPropertiesEXT"})," \uff08\u4f7f\u7528\u4e86 ",(0,s.jsx)(n.a,{href:"https://docs.vulkan.org/guide/latest/extensions/VK_EXT_inline_uniform_block.html#VK_EXT_inline_uniform_block",children:"Inline Uniform Block"}),"\uff09"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u63a8\u9001\u5e38\u91cf","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"maxPushConstantsSize"})," ",(0,s.jsx)(n.code,{children:"128"}),"- \u8bbe\u5907\u81f3\u5c11\u9884\u7559128\u5b57\u8282"]}),"\n"]}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);