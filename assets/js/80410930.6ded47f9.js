"use strict";(self.webpackChunkvulkan_doc=self.webpackChunkvulkan_doc||[]).push([[3110],{4362:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>i,contentTitle:()=>a,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var f=n(4848),t=n(8453);const l={title:"Blend\u7528\u6cd5",categories:["opengl\u6280\u672f"],tags:["opengl\u57fa\u7840","blend"],date:new Date("2021-12-16T22:29:30.000Z"),authors:"sumcai",permalink:"/opengl/blend/"},a="Blend\u7528\u6cd5",o={permalink:"/blog/08.Blend\u7528\u6cd5",source:"@site/blog/08.Blend\u7528\u6cd5.md",title:"Blend\u7528\u6cd5",description:"opengl\u7684blend\u7528\u4e8e\u989c\u8272\u6df7\u5408 \uff0c\u5982\u679c\u4e0d\u7528\u6df7\u5408\uff0c\u4e24\u5f20\u8d34\u56fe\u8d34\u5728\u4e00\u8d77\u65f6\uff0c\u524d\u9762\u7684\u8d34\u56fe\u4f1a\u8986\u76d6\u540e\u9762\u7684\u8d34\u56fe\uff0c\u52a0\u4e0a\u6df7\u5408\u529f\u80fd\uff0c\u4e24\u5f20\u8d34\u56fe\u53ef\u4ee5\u5f88\u597d\u7684\u8d34\u5408\u5728\u4e00\u8d77\u3002\u7528\u4ee3\u7801\u6f14\u793a\u4e00\u4e0b\u7528\u6cd5\u3002",date:"2021-12-16T22:29:30.000Z",tags:[{inline:!0,label:"opengl\u57fa\u7840",permalink:"/blog/tags/opengl\u57fa\u7840"},{inline:!0,label:"blend",permalink:"/blog/tags/blend"}],readingTime:3.55,hasTruncateMarker:!1,authors:[{name:"\u82cf\u660e\u624d",title:"Vulkan\u9a71\u52a8\u586b\u5751\u72ee",url:"https://github.com/sumcai",email:"sumcai@163.com",page:{permalink:"/blog/authors/sumcai"},description:"\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb sumcai@163.com",socials:{github:"https://github.com/sumcai"},imageURL:"https://avatars.githubusercontent.com/u/76768485?v=4",key:"sumcai"}],frontMatter:{title:"Blend\u7528\u6cd5",categories:["opengl\u6280\u672f"],tags:["opengl\u57fa\u7840","blend"],date:"2021-12-16T22:29:30.000Z",authors:"sumcai",permalink:"/opengl/blend/"},unlisted:!1,prevItem:{title:"Framebuffer\u7528\u6cd5",permalink:"/blog/09.Framebuffer\u7528\u6cd5"},nextItem:{title:"Stencil\u7528\u6cd5",permalink:"/blog/07.Stencil\u7528\u6cd5"}},i={authorsImageUrls:[void 0]},d=[{value:"blend\u5f00\u542f\u65b9\u6cd5",id:"blend\u5f00\u542f\u65b9\u6cd5",level:2},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801",level:2}];function s(r){const e={code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...r.components};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(e.p,{children:"opengl\u7684blend\u7528\u4e8e\u989c\u8272\u6df7\u5408 \uff0c\u5982\u679c\u4e0d\u7528\u6df7\u5408\uff0c\u4e24\u5f20\u8d34\u56fe\u8d34\u5728\u4e00\u8d77\u65f6\uff0c\u524d\u9762\u7684\u8d34\u56fe\u4f1a\u8986\u76d6\u540e\u9762\u7684\u8d34\u56fe\uff0c\u52a0\u4e0a\u6df7\u5408\u529f\u80fd\uff0c\u4e24\u5f20\u8d34\u56fe\u53ef\u4ee5\u5f88\u597d\u7684\u8d34\u5408\u5728\u4e00\u8d77\u3002\u7528\u4ee3\u7801\u6f14\u793a\u4e00\u4e0b\u7528\u6cd5\u3002"}),"\n",(0,f.jsx)(e.h2,{id:"blend\u5f00\u542f\u65b9\u6cd5",children:"blend\u5f00\u542f\u65b9\u6cd5"}),"\n",(0,f.jsx)(e.p,{children:"blend\u4e3b\u8981\u4f7f\u7528\u4e0b\u9762\u51e0\u4e2a\u51fd\u6570\uff1a"}),"\n",(0,f.jsxs)(e.ul,{children:["\n",(0,f.jsxs)(e.li,{children:[(0,f.jsx)(e.code,{children:"glEnable(GL_BLEND)"}),": \u5f00\u542fblend\u529f\u80fd"]}),"\n",(0,f.jsxs)(e.li,{children:[(0,f.jsx)(e.code,{children:"glBlendFunc(GLenum sfactor, GLenum dfactor)"}),": sfactor\u6e90\u56e0\u5b50\uff0cdfactor\u76ee\u6807\u56e0\u5b50"]}),"\n"]}),"\n",(0,f.jsx)(e.h2,{id:"\u793a\u4f8b\u4ee3\u7801",children:"\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,f.jsx)(e.p,{children:"\u6211\u4eec\u5148\u753b\u4e00\u4e2a\u666e\u901a\u573a\u666f"}),"\n",(0,f.jsx)(e.pre,{children:(0,f.jsx)(e.code,{className:"language-c++",children:'void display( GLFWwindow* window )\r\n{\r\n    glClearColor( 0, 0, 0.4, 0 );\r\n    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\r\n\r\n    glUseProgram(boxProgramID);\r\n\r\n\r\n    glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float) 5 / (float)5, 0.1f, 100.0f);\r\n    glm::mat4 view = glm::lookAt(glm::vec3(1,2,3), glm::vec3(0,0,0), glm::vec3(0,1,0));\r\n    glm::mat4 model = glm::mat4(1.0f);\r\n    glm::mat4 mvp = projection * view * model;\r\n\r\n    // 1.\u753b\u5730\u9762\r\n    GLuint mvpId = glGetUniformLocation(boxProgramID, "MVP");\r\n    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &mvp[0][0]);\r\n    glBindVertexArray(FloorVAO);\r\n    glBindTexture(GL_TEXTURE_2D, floorTexture);\r\n    glDrawArrays(GL_TRIANGLES, 0, 6);\r\n\r\n    // 2.\u753b\u7acb\u65b9\u4f53\r\n    glBindVertexArray(VAO);\r\n    glBindTexture(GL_TEXTURE_2D, texture);\r\n    glDrawArrays(GL_TRIANGLES, 0, 36);\r\n\r\n    // 3.\u753bblend\u7269\u4f53\r\n    model = glm::mat4(1.0f);\r\n    model = glm::translate(model, glm::vec3(0, 0, 1.01f));\r\n    mvp = projection * view * model;\r\n    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &mvp[0][0]);\r\n    glBindTexture(GL_TEXTURE_2D, blendTexture);\r\n    glDrawArrays(GL_TRIANGLES, 0, 6);\r\n}\r\n\r\nvoid prepare() {\r\n    boxProgramID = LoadShaders( "data/shader/03.MVP.vs", "data/shader/03.MVP.fs" );\r\n\r\n    const GLfloat g_vertex_buffer_data[] = {\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,\r\n            0.5f, -0.5f, -0.5f,  1.0f, 0.0f,\r\n            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\r\n            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\r\n            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,\r\n\r\n            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\r\n            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\r\n            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,\r\n            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,\r\n            -0.5f,  0.5f,  0.5f,  0.0f, 1.0f,\r\n            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\r\n\r\n            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n            -0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\r\n            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n\r\n            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\r\n            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n            0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\r\n            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n            0.5f, -0.5f, -0.5f,  1.0f, 1.0f,\r\n            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\r\n            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\r\n            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\r\n            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\r\n\r\n            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,\r\n            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\r\n            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\r\n            -0.5f,  0.5f,  0.5f,  0.0f, 0.0f,\r\n            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f\r\n    };\r\n\r\n    float fllor_vertex_buffer_data[] = {\r\n            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,\r\n            -5.0f, -0.5f,  5.0f,  0.0f, 0.0f,\r\n            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,\r\n\r\n            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,\r\n            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,\r\n            5.0f, -0.5f, -5.0f,  1.0f, 1.0f\r\n    };\r\n    float blend_vertex_buffer_data[] = {\r\n            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,\r\n            0.0f, -0.5f,  0.0f,  0.0f,  1.0f,\r\n            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,\r\n\r\n            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,\r\n            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,\r\n            1.0f,  0.5f,  0.0f,  1.0f,  0.0f\r\n    };\r\n\r\n    // 1.VAO1\u3001VBO\u7684\u6570\u636e\r\n    glGenVertexArrays(1, &VAO);\r\n    glBindVertexArray(VAO);\r\n    GLuint VBO1;\r\n    glGenBuffers(1, &VBO1);\r\n    glBindBuffer(GL_ARRAY_BUFFER, VBO1);\r\n    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);\r\n    glEnableVertexAttribArray(0);\r\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);\r\n    // \u7eb9\u7406\u5750\u6807\r\n    glEnableVertexAttribArray(1);\r\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));\r\n\r\n    // 2.\u5730\u9762\u8d34\u56fe\r\n    glGenVertexArrays(1, &FloorVAO);\r\n    glBindVertexArray(FloorVAO);\r\n    GLuint VBO2;\r\n    glGenBuffers(1, &VBO2);\r\n    glBindBuffer(GL_ARRAY_BUFFER, VBO2);\r\n    glBufferData(GL_ARRAY_BUFFER, sizeof(fllor_vertex_buffer_data), fllor_vertex_buffer_data, GL_STATIC_DRAW);\r\n    glEnableVertexAttribArray(0);\r\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);\r\n    // \u7eb9\u7406\u5750\u6807\r\n    glEnableVertexAttribArray(1);\r\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));\r\n\r\n    // 2.blend\u8d34\u56fe\r\n    glGenVertexArrays(1, &BlendVAO);\r\n    glBindVertexArray(BlendVAO);\r\n    GLuint VBO3;\r\n    glGenBuffers(1, &VBO3);\r\n    glBindBuffer(GL_ARRAY_BUFFER, VBO3);\r\n    glBufferData(GL_ARRAY_BUFFER, sizeof(blend_vertex_buffer_data), blend_vertex_buffer_data, GL_STATIC_DRAW);\r\n    glEnableVertexAttribArray(0);\r\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);\r\n    // \u7eb9\u7406\u5750\u6807\r\n    glEnableVertexAttribArray(1);\r\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));\r\n\r\n    // \u7eb9\u7406\u6570\u636e\r\n    floorTexture = loadTexture("data/img/33.png");\r\n    texture = loadTexture("data/img/11.jpg");\r\n    blendTexture = loadTexture("data/img/chick.png");\r\n\r\n    glEnable(GL_DEPTH_TEST);\r\n}\n'})}),"\n",(0,f.jsx)(e.p,{children:"\u90fd\u662f\u666e\u901a\u8d34\u56fe\u64cd\u4f5c\uff0c\u663e\u793a\u6548\u679c\u5982\u4e0b\uff1a"}),"\n",(0,f.jsx)(e.p,{children:(0,f.jsx)(e.img,{src:"https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/8fdf692cbf38ffeae519a368949c634e.png",alt:"1639699366516"})}),"\n",(0,f.jsx)(e.p,{children:"\u56e0\u4e3a\u662f\u76f4\u63a5\u8d34\u56fe\u8986\u76d6\u7684\uff0c\u6240\u4ee5\u5c0f\u9e21\u5468\u8fb9alpha\u4e3a0\u7684\u989c\u8272\u663e\u793a\u4e3a\u9ed1\u8272\uff0c\u5982\u679c\u52a0\u4e0ablend\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u770b\u5230\u540e\u9762\u56fe\u7247\u7684\u5185\u5bb9\u4e86\uff1a"}),"\n",(0,f.jsx)(e.pre,{children:(0,f.jsx)(e.code,{className:"language-c++",children:"glEnable(GL_BLEND);\r\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n"})}),"\n",(0,f.jsx)(e.p,{children:"\u6700\u7ec8\u663e\u793a\u6548\u679c\uff1a"}),"\n",(0,f.jsx)(e.p,{children:(0,f.jsx)(e.img,{src:"https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/3eddf9c37aea8e93be427111b162f78e.png",alt:"1639699653817"})})]})}function g(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,f.jsx)(e,{...r,children:(0,f.jsx)(s,{...r})}):s(r)}},8453:(r,e,n)=>{n.d(e,{R:()=>a,x:()=>o});var f=n(6540);const t={},l=f.createContext(t);function a(r){const e=f.useContext(l);return f.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function o(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:a(r.components),f.createElement(l.Provider,{value:e},r.children)}}}]);