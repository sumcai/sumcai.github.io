"use strict";(self.webpackChunkvulkan_doc=self.webpackChunkvulkan_doc||[]).push([[8141],{2416:(n,e,c)=>{c.r(e),c.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>_});var t=c(4848),o=c(8453);const i={title:"vkCreateXcbSurfaceKHR",description:"vkCreateXcbSurfaceKHR"},r="vkCreateXcbSurfaceKHR",a={id:"api/vkCreateXcbSurfaceKHR",title:"vkCreateXcbSurfaceKHR",description:"vkCreateXcbSurfaceKHR",source:"@site/docs/api/vkCreateXcbSurfaceKHR.md",sourceDirName:"api",slug:"/api/vkCreateXcbSurfaceKHR",permalink:"/api/vkCreateXcbSurfaceKHR",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"vkCreateXcbSurfaceKHR",description:"vkCreateXcbSurfaceKHR"},sidebar:"VulkanApi",previous:{title:"vkCreateInstance",permalink:"/api/vkCreateInstance"},next:{title:"vkEnumerateInstanceExtensionProperties",permalink:"/api/vkEnumerateInstanceExtensionProperties"}},s={},_=[{value:"\u51fd\u6570\u539f\u578b",id:"\u51fd\u6570\u539f\u578b",level:2},{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:2},{value:"\u8865\u5145",id:"\u8865\u5145",level:2},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c",level:2},{value:"\u4ee3\u7801\u793a\u4f8b",id:"\u4ee3\u7801\u793a\u4f8b",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"vkcreatexcbsurfacekhr",children:"vkCreateXcbSurfaceKHR"})}),"\n",(0,t.jsx)(e.h2,{id:"\u51fd\u6570\u539f\u578b",children:"\u51fd\u6570\u539f\u578b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"VkResult vkCreateXcbSurfaceKHR(\n    VkInstance                                  instance,\n    const VkXcbSurfaceCreateInfoKHR*            pCreateInfo,\n    const VkAllocationCallbacks*                pAllocator,\n    VkSurfaceKHR*                               pSurface);\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u63cf\u8ff0",children:"\u63cf\u8ff0"}),"\n",(0,t.jsx)(e.p,{children:"\u4e3aX11\u7a97\u53e3\u521b\u5efaVkSurfaceKHR\u5bf9\u8c61\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"instance"})," : \u4e0esurface\u5173\u8054\u7684surface\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"pCreateInfo"})," : ",(0,t.jsx)(e.code,{children:"VkXcbSurfaceCreateInfoKHR"})," \u7ed3\u6784\u4f53\u6307\u9488\uff0c\u5305\u542b\u521b\u5efasurface\u7684\u4fe1\u606f\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"pAllocator"})," : ",(0,t.jsx)(e.code,{children:"host memory"})," \u5206\u914d\u5668\u3002"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"pSurface"})," : \u521b\u5efa\u8fd4\u56de\u7684suface\u53e5\u67c4\u3002"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u8865\u5145",children:"\u8865\u5145"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"VkXcbSurfaceCreateInfoKHR"})," \u7ed3\u6784\u4f53\u5b9a\u4e49\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"typedef struct VkXcbSurfaceCreateInfoKHR {\n    VkStructureType               sType;\n    const void*                   pNext;\n    VkXcbSurfaceCreateFlagsKHR    flags;\n    xcb_connection_t*             connection;    //xcb connectin\n    xcb_window_t                  window;\t\t   //xcb window\n} VkXcbSurfaceCreateInfoKHR;\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u8fd4\u56de\u503c",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"VK_SUCCESS"})," : \u6210\u529f\u521b\u5efasurface\u3002"]}),"\n",(0,t.jsx)(e.li,{children:"\u5176\u4ed6 : \u521b\u5efa\u5931\u8d25\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u4ee3\u7801\u793a\u4f8b",children:"\u4ee3\u7801\u793a\u4f8b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:'struct sample_info {\n    xcb_connection_t *connection;\n    xcb_screen_t *screen;\n    xcb_window_t window;\n    xcb_intern_atom_reply_t *atom_wm_delete_window;\n    VkSurfaceKHR surface;\n}\n\nvoid init_connection(struct sample_info &info) {\n    const xcb_setup_t *setup;\n    xcb_screen_iterator_t iter;\n    int scr;\n\n    info.connection = xcb_connect(NULL, &scr);\n    if (info.connection == NULL || xcb_connection_has_error(info.connection)) {\n        std::cout << "Unable to make an XCB connection\\n";\n        exit(-1);\n    }\n\n    setup = xcb_get_setup(info.connection);\n    iter = xcb_setup_roots_iterator(setup);\n    while (scr-- > 0) xcb_screen_next(&iter);\n    info.screen = iter.data;\n}\n\n\nvoid init_window(struct sample_info &info) {\n    uint32_t value_mask, value_list[32];\n\n    info.window = xcb_generate_id(info.connection);\n\n    value_mask = XCB_CW_BACK_PIXEL | XCB_CW_EVENT_MASK;\n    value_list[0] = info.screen->black_pixel;\n    value_list[1] = XCB_EVENT_MASK_KEY_RELEASE | XCB_EVENT_MASK_EXPOSURE;\n\n    xcb_create_window(info.connection, XCB_COPY_FROM_PARENT, info.window, info.screen->root, 0, 0, info.width, info.height, 0,\n                      XCB_WINDOW_CLASS_INPUT_OUTPUT, info.screen->root_visual, value_mask, value_list);\n\n    /* Magic code that will send notification when window is destroyed */\n    xcb_intern_atom_cookie_t cookie = xcb_intern_atom(info.connection, 1, 12, "WM_PROTOCOLS");\n    xcb_intern_atom_reply_t *reply = xcb_intern_atom_reply(info.connection, cookie, 0);\n\n    xcb_intern_atom_cookie_t cookie2 = xcb_intern_atom(info.connection, 0, 16, "WM_DELETE_WINDOW");\n    info.atom_wm_delete_window = xcb_intern_atom_reply(info.connection, cookie2, 0);\n\n    xcb_change_property(info.connection, XCB_PROP_MODE_REPLACE, info.window, (*reply).atom, 4, 32, 1,\n                        &(*info.atom_wm_delete_window).atom);\n    free(reply);\n\n    xcb_map_window(info.connection, info.window);\n\n    // Force the x/y coordinates to 100,100 results are identical in consecutive\n    // runs\n    const uint32_t coords[] = {100, 100};\n    xcb_configure_window(info.connection, info.window, XCB_CONFIG_WINDOW_X | XCB_CONFIG_WINDOW_Y, coords);\n    xcb_flush(info.connection);\n\n    xcb_generic_event_t *e;\n    while ((e = xcb_wait_for_event(info.connection))) {\n        if ((e->response_type & ~0x80) == XCB_EXPOSE) break;\n    }\n}\n\n\nvoid main()\n{\n    struct sample_info info = {};\n    init_connection(info);\n    init_window(info);\n\n    VkXcbSurfaceCreateInfoKHR createInfo = {};\n    createInfo.sType = VK_STRUCTURE_TYPE_XCB_SURFACE_CREATE_INFO_KHR;\n    createInfo.pNext = NULL;\n    createInfo.connection = info.connection;\n    createInfo.window = info.window;\n    vkCreateXcbSurfaceKHR(info.inst, &createInfo, NULL, &info.surface);\n}\n'})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,c)=>{c.d(e,{R:()=>r,x:()=>a});var t=c(6540);const o={},i=t.createContext(o);function r(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);