"use strict";(self.webpackChunkvulkan_doc=self.webpackChunkvulkan_doc||[]).push([[6388],{3568:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>o,frontMatter:()=>i,metadata:()=>a,toc:()=>s});var l=r(4848),t=r(8453);const i={title:"vkCmdClearDepthStencilImage",description:"vkCmdClearDepthStencilImage"},c=":material-chevron-right-circle: vkCmdClearDepthStencilImage",a={id:"api/vkCmdClearDepthStencilImage",title:"vkCmdClearDepthStencilImage",description:"vkCmdClearDepthStencilImage",source:"@site/docs/api/vkCmdClearDepthStencilImage.md",sourceDirName:"api",slug:"/api/vkCmdClearDepthStencilImage",permalink:"/api/vkCmdClearDepthStencilImage",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"vkCmdClearDepthStencilImage",description:"vkCmdClearDepthStencilImage"},sidebar:"VulkanApi",previous:{title:"vkCmdClearColorImage",permalink:"/api/vkCmdClearColorImage"},next:{title:"vkCmdCopyBuffer",permalink:"/api/vkCmdCopyBuffer"}},d={},s=[{value:"\u51fd\u6570\u539f\u578b",id:"\u51fd\u6570\u539f\u578b",level:2},{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:2},{value:"\u8865\u5145",id:"\u8865\u5145",level:2},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c",level:2},{value:"\u4ee3\u7801\u793a\u4f8b",id:"\u4ee3\u7801\u793a\u4f8b",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"material-chevron-right-circle-vkcmdcleardepthstencilimage",children:":material-chevron-right-circle: vkCmdClearDepthStencilImage"})}),"\n",(0,l.jsx)(n.h2,{id:"\u51fd\u6570\u539f\u578b",children:"\u51fd\u6570\u539f\u578b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"void vkCmdClearDepthStencilImage(\r\n    VkCommandBuffer                             commandBuffer,\r\n    VkImage                                     image,\r\n    VkImageLayout                               imageLayout,\r\n    const VkClearDepthStencilValue*             pDepthStencil,\r\n    uint32_t                                    rangeCount,\r\n    const VkImageSubresourceRange*              pRanges);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u63cf\u8ff0",children:"\u63cf\u8ff0"}),"\n",(0,l.jsx)(n.p,{children:"\u6e05\u9664\u6df1\u5ea6\u548c/\u6216\u6a21\u677f\uff08stencil\uff09\u56fe\u50cf\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"commandBuffer"})," : \u5f55\u5236\u6307\u4ee4\u7684\u547d\u4ee4\u7f13\u51b2\u533a\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"image"})," : \u8981\u6e05\u9664\u7684\u76ee\u6807\u56fe\u50cf\uff0c\u5fc5\u987b\u662f\u5177\u6709 ",(0,l.jsx)(n.code,{children:"VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT"})," \u7684 VkImage\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"imageLayout"})," : \u56fe\u50cf\u5728\u6e05\u9664\u64cd\u4f5c\u65f6\u7684\u5f53\u524d\u5e03\u5c40\uff0c\u5fc5\u987b\u662f",(0,l.jsx)(n.code,{children:"VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL"}),"\u3001",(0,l.jsx)(n.code,{children:"VK_IMAGE_LAYOUT_GENERAL"}),"\u3001",(0,l.jsx)(n.code,{children:"VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL"}),"\u4e2d\u7684\u4e00\u4e2a \u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"pDepthStencil"})," : \u6307\u5411 ",(0,l.jsx)(n.code,{children:"VkClearDepthStencilValue"})," \u7ed3\u6784\u4f53\uff0c\u5305\u542b\u8981\u6e05\u9664\u7684\u6df1\u5ea6\u548c\u6a21\u677f\u503c\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"rangeCount"})," : \u56fe\u50cf\u5b50\u533a\u57df\u8303\u56f4\u7684\u6570\u91cf\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"pRanges"})," : \u56fe\u50cf\u5b50\u533a\u57df\u8303\u56f4\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u8865\u5145",children:"\u8865\u5145"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"VkClearDepthStencilValue"})," \u7ed3\u6784\u4f53\u5b9a\u4e49\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"typedef struct VkClearDepthStencilValue {\r\n    float    depth;   // \u6e05\u9664\u7684\u6df1\u5ea6\u503c\uff0c\u901a\u5e38\u662f 1.0\r\n    uint32_t stencil; // \u6e05\u9664\u7684\u6a21\u677f\u503c\uff0c\u901a\u5e38\u662f 0\r\n} VkClearDepthStencilValue;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8fd4\u56de\u503c",children:"\u8fd4\u56de\u503c"}),"\n",(0,l.jsx)(n.p,{children:"\u65e0"}),"\n",(0,l.jsx)(n.h2,{id:"\u4ee3\u7801\u793a\u4f8b",children:"\u4ee3\u7801\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"VkClearDepthStencilValue clearValue = {\r\n    .depth = 1.0f,\r\n    .stencil = 0\r\n};\r\n\r\nVkImageSubresourceRange range = {\r\n    .aspectMask = VK_IMAGE_ASPECT_DEPTH_BIT | VK_IMAGE_ASPECT_STENCIL_BIT,\r\n    .baseMipLevel = 0,\r\n    .levelCount = 1,\r\n    .baseArrayLayer = 0,\r\n    .layerCount = 1\r\n};\r\n\r\n// \u786e\u4fdd image \u5df2\u8fc7\u6e21\u5230 VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL\r\nvkCmdClearDepthStencilImage(\r\n    commandBuffer,\r\n    depthStencilImage,\r\n    VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,\r\n    &clearValue,\r\n    1,\r\n    &range\r\n);\r\n\n"})})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>a});var l=r(6540);const t={},i=l.createContext(t);function c(e){const n=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);