<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Vulkan Guide Blog</title>
        <link>https://www.iogl.cn/blog</link>
        <description>Vulkan Guide Blog</description>
        <lastBuildDate>Mon, 07 Oct 2024 14:52:25 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh</language>
        <item>
            <title><![CDATA[MipMap与LOD是何物？]]></title>
            <link>https://www.iogl.cn/blog/11.MipMap与LOD是何物</link>
            <guid>https://www.iogl.cn/blog/11.MipMap与LOD是何物</guid>
            <pubDate>Mon, 07 Oct 2024 14:52:25 GMT</pubDate>
            <description><![CDATA[MipMap与LOD是何物？]]></description>
            <content:encoded><![CDATA[<p>MipMap与LOD是何物？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lod模型金字塔">LOD:模型金字塔<a href="https://www.iogl.cn/blog/11.MipMap%E4%B8%8ELOD%E6%98%AF%E4%BD%95%E7%89%A9#lod%E6%A8%A1%E5%9E%8B%E9%87%91%E5%AD%97%E5%A1%94" class="hash-link" aria-label="LOD:模型金字塔的直接链接" title="LOD:模型金字塔的直接链接">​</a></h2>
<p>LOD：全称Level Of Detail，中文翻译“细节级别渐变”，顾名思义，不同的级别展示不同的细节，那么究竟这个技术是如何运用在游戏项目中的呢？通过例子我们来学习一下。关于为什么要使用这个技术，和游戏优化是密不可分的，使用这个技术可以减少需要处理的模型顶点数目，降低GPU性能瓶颈的风险。</p>
<p>原理：当模型离摄像机（可以是人物摄像机或其他摄像机）很远时，然后根据距离的远近使用不同模型级别，远的时候就选择低级别的模型，近的时候选择高细节模型，这样就可以减少模型上面的顶点和面片数量从而提高性能。</p>
<p>准备：准备三个相同的模型，但是这三个模型他们的三角面和顶点数都不同，这样就可以代表三种从高—中—低的层级。（由于没有找到模型资源，所以这里我们使用最能体现GPU性能消耗的particle特效来做，rate分别是20,10,5）</p>
<p>首先在层次面板创建一个EmptyGo，命名为TestLOD,对你找来的三个模型以“...LOD01”（结尾序号表示层级）命名，最后全部拖放到TestLOD下,记住记住，这三个物体位置要全部相同。</p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAV0AAABQCAYAAAC6YabdAAAImElEQVR4nO3deYjMfxzH8feyWGFdYTfWfcQ6c+SIWEekHLkjipWQ3Edy32frPiJ/CCtHEnK3rBBR7qwoVohQjpzJr/dHM333mt2dnf3MfOf3fNTuzPea73f2j/d89vP5fl4TkZqa+lcAAIWudOnSUiTYFwEA/ycUXQCwiKILABZRdAHAosjfv3/Lz58/5c+fPznuVLRoUSlRooQUK1bM4qUBQPiJ1EJ669Yt+fDhQ447VaxYUdq1a+dd7tSpU477pqam+nUh+prOYzMvO504cUIOHDggb9++ldjYWElMTJQuXbpkuT79sChbtqy0bt1aRowYITVq1PDr2gAgUCL1V3x8vNy8eVN+/PiRZYeoqCiz3SmvxbEwXLt2Tfbt2ydz586V+vXrS1pamqxYscJcp/ODQa/p169f8u7dO7l06ZJMmjRJkpKSpE6dOtauFQAyM3260dHREhMTk+0Oul6358enT59k3rx50rNnTxk5cqQ8fPjQu+3ixYsyaNAg6dWrlyxevNis87RM9dFXK1rt379fpkyZIs2aNZOSJUtK8+bNZfLkybJ3794s+xYvXlyqVatmWrnjxo2TnTt35ut9AECgeQfStNWo/bZOuqzr82vTpk2meGo3gBbI9evXe7fpc22ZHj58WOrWrWvWeVrK+phbq/n58+fSpEmTDOuaNm0qT58+9Xlc586d5f79+/l+LwAQSJGeJ9oqrFevnjx48MC7UZd1fX7duHFDzp8/L8uWLTPL2rfqERcXJ7t27ZKEhATp169fQa49XyIiIqydCwByEulcqF69urx48UK+fPkiZcqUMcv++Pv3rxw/flzKly+fZdvGjRvlypUr5ufo0aOmAOeHXtO9e/ekffv23nW6XLt2bZ/HaQtauyIAIJgy3KdbpEgRadSokWkV6qMu+6NVq1amoGrxfv/+vaxZs8a7LTk52RTMMWPGyOvXr73rK1euLI8fP871tbV/Vgv33bt3zcDfnTt3zLL2E2emt8PpOfROh+3bt5t+XQAIpsjMK8qVK2cKoD76a+rUqaYQDhs2zLzOkCFDvNtevnxpCqTebaD7eehg2IwZM8zzkydPmsfMg2raWu3QoYN8/PhRVq1aZW4Zq1KliowaNUq6deuWYV89Vj80PLeMaT8zt4wBCLYIUsYAwA5SxgDAMoouAFhE0QUAiyi6AGARRRcALKLoAoBFYVV0cwvLyes+AFBYrBddT5JYjx49zISI9PT0Ar2Wk62ISV+FW0N+dFKIZksMHz5cUlJSshyrP5r/q9kTy5cvN1OvnT5//izTp083SWw6YUSXPXSWnQb36N8PgPsEpaWrxVGzGdq2beuNdwwHnqzfOXPmyKlTp2TmzJlm+vH169cz7Kfv/+zZs7JlyxYzS06zfp89e+bdvm3bNpP7e+jQIalZs6bs2LHDu61r164yceLEbLOPAYS+oHUvaBautvR0WrDT4MGDTWEZMGCASSrz0NahfqXQ6tWrzfbsMnidLdBv377JunXrpG/fvjJ69Gi5fft2lmvwlfvrj0Bl/eo3eej719ChgQMHmmWPvMRfAghdQSu6379/N63CzMlf2rq7cOGCydzVlqCTth61QGkQem4ZvHqsFrWDBw/KypUr5dixY1n28ZX7649AZf3qVydVqFDBPNevStLQIADhIUvgjQ1a6DQgXYNoZs+e7V3/6tUr2b17tzx69MiE2ugXZjr16dMnz+fQ6MgjR46Y82ir05Pt6+Qr99em7LJ+/U14AxDaglJ0c/r3WAeP+vfvL+PHjzdZvNqNUBC5FS5fub/+CFTWr7Zy9UOnUqVK5tHT6gXgfiHVnPr69au0aNFCSpUqZVqqufGVwdumTRs5c+aMaS1rBKR2V2TmK/fXH4HK+m3ZsqW5Lv17aLeILgMID0Fp6eZER/GnTZtmnvfu3TvX/bPL4HVu27Bhgxmg0gGpoUOHZjneV+5vbgoz63fChAmyZMkSM4imYfILFizI9rye5wysAe5Bni4AWKJ5uiHV0g0VviY/0KoEUBAU3WxQWAEUlpAaSAOAcEfRBQCLKLoAYBFFFwAsCquiS54ugFBn/e4FT9GLioqShg0bmqm/On3W39dy3mlgM083p3NpeI7OMtPJEbGxsZKYmGiyc53HKs158EyO0JlszskRmp+rkZeaQREfH28mR0RHR5ttp0+fNhNB0tLSTKDP2LFjzaQMAO5Anm4A2cjTvXr1qpmFd+7cOROArglqANyDPF2X5elqIlqtWrXMNOI3b95IXFxcga4ZgF3k6bo0T1f/fhqKM3/+/AJdMwC7yNN1YZ6utviTkpJMOJDGPwJwD/J0XZanqwV36dKlpkuEggu4T0jdMkae7j++8nQXLVpkBtd0EBKA+4RU4A15uv/4ytO9fPmy+dmzZ0+GcwNwB/J0AcAS8nRzQJ4ugMJC0c0GhRVAYQmpgTQACHcUXQCwiKILABZRdAHAorAquuTpAgh15OkG4LxOhZ2nq4llGgikORVVq1Y1M9nI0wXcgzzdALKRp6tpZDoVWI/XmWs6+w2Ae5Cn67I83bVr13oDdPQ9Nm7cuEDXDMCuoE2O8JWnq+lfT548kVmzZkn37t292zx5up44SF//5msrUrstNE9X/13fvHlzhuAY5cnTXbhwoWlBap6uM9MgvwqSp+vMDs5Lnm5CQoLExMTI1q1b/b5eAPaRp+vCPF2VkpJiwtz12jW0B4A7kKfrsjxdD/2A6NixY4G/7QKAXSF1yxh5uv/4ytPVQbr09HTTPZOcnGyiHwG4R0gF3pCn+4+vPN0GDRqYLhnt99UBO2f3DIDQR54uAFhCnm4OyNMFUFgoutmgsAIoLCE1kAYA4Y6iCwAWUXQBwCKKLgBYRNEFAIsougBgEUUXACyi6AKARRRdALCIogsAFlF0AcAiii4AWETRBQCLKLoAYBFFFwAs+g9RFZZGK99/JAAAAABJRU5ErkJggg==" width="349" height="80" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAVoAAABOCAYAAABhYd5PAAAROklEQVR4nO2dCXBT5RbHT5u2aWkrS9mXgiirD4UHouBDRoqCA7IMIiDIDKugorg8HFnkgaDIooA6joNPGVlUFpmqg4jwGARkGSjwWIu0tKVYWbqlbZKuefl/9eYlJffetEma8uX8ZjL39ubm5uOQe+75zvd9/xOSnZ1tKysrI4ZhGMY/hK1cuZJSU1MD3Q6GYRhpCUlKSrIVFhYGuh0MwzDSEhroBjAMw8hOmL8uXFpaSjabjcLDwykkJMRfX8MwDOMxc+bMJ0PTLnQtPYtiYqPJYAijMEMEhdo9YXhYKEVGRNi3YWQMN1CHFg1p+Ij+Pvlevzja4uJiMrVZJ/ZjM6ZSZGSkP76GYRjGY+YuWEWGxl2oX98+9M+NY6lRrFHz/FFT5utes6KigjZu3Cj2J0yYQKGh7pMEfnO01wqPiv27i59jR8swTMA5knSM/nMwidZt2E6L1m4ljE01aRJHbVs2prZtmlPrVk2ofoyRWjSMpjB7JzzfUuL2OuipZ2Rk0P79+2ncuHF04MABcRz7cLr9+/en+Ph4l568i6NFdx9Osry8XLWxBoOBjEajSAmoAS9vKb/l2A9WUlJS6P333xdb2G337t2BbhLDBC3lJSUUFhlBVouF/jF0MCWnZorjWbkWSs26SKb8w1RUVEBNGsTQ/BkjVH0XHO2+ffvo0KFDDicLXnjhBbHF5yZOnKjuaOE8jx8/TtnZ2aqNjYuLoz59+tT8X+sHHn30Uc33f/3111pqiSsffPABXbx4kdasWUM9evQISBsYhqnEEG4kU4GFSstK4Q3tkWwcDep9t3hv5+HLlHWzkMrJRslnz4hjWiNLTz/9tHC04NlnnxXbzZs3O96rym2pg/vuu4+OHTtGVqv1tpORAsD7dQ1nR6o43UA5V2cuXboktt26dQtwSxiGCbH3KnPyi4RvyzdbKOHv8bRl7wURoY5O6EL/TjxJIaGhosduNpsRut52DUSrX331lcPJIi/7wAMPiH3kZ5E6ePXVV+mRRx4RUa2Ss73N0d51113UvHlzSktLu+1LcBzv34koDvi1116j7777jq5evSrCfzBq1CjKz88X+61bt6YZM2bQww8/7PK5SZMm0Q8//CDSKrNnz6bHHntMHL9w4QJ98sknDqfaqFEj+uabb1yi7AEDBogtnL/JZKK1a9fS0aOVOWz0DmbNmkWxsbGa7XTXDnwuOTmZ9uzZI34Azu1iGMaVsNBwyi8ootISC1mLS2nDrjOie9+xTSMyW8vIZneKNluFcLzCH7gZ18J95pxSQBYgOjrasV/1PFVHCzp27EhZWVkiX6sAL4/jeuDiJaWlVJhXjyKsZnEN5y8MNOjOV2X79u3CuOjmP//887R8+XLh5JxJSEig3r1708yZM+njjz92OLQFCxbQjRs36Msvv6R77rnHcT6cqrvoGk4Wudp33nlH2GXhwoXi+Ny5c3XbqbQDznn69Om0ePFi8QR9/PHHaerUqS7tYhjGlciYWDJbSshqj1ZLy8vsEW4oRUcY6NHu8fR7RjaVlZZRRTl8VTjl5eWRTSV5MHr0aBoyZAjNnz9f3PfKYD/2wZIlS6hevXoun3HraCMiIqhDhw509uxZxzH8jeNqwFEhysooLKcL9XvQ73/+i8avmU2d8+ZR5rRpFN6rlxgQCvSc2q1bt1KTJk0cjv/69eu0bt064WRv3aocwFO2zmAUUXmS3bx503FcuQ6M3rNnT5Gfadeuner3HzlyRGwfeughx7HDhw/rttNdO5S/bX91cZzbxTCMK6Fh4VRoKaZiq5Ws9gi21B7V3iww0+HTafTbf9PEfYRby2ouotzcXPfXsN+PcKxbtmxxHPv0009dzvnxxx9FkIWAzfE5tUbhBla6s9jibzVw498ssNI+a2PaVPE3WnH8Fh0614zMWS2pKCWFOtqjtfr2CM6ckRHwWQjNmjVzcV7IpyDCxNQMZ+O5w11UvmzZMnriiScIwjzff/89zZkzx6N24Fp48HjaTq12BPrhxTB3AliYcDU9ze5ICyknJ4dybtyiipJC6tW1FdlKLJSdfZMKCvLt93Jx5YSA21O0jvsWOdgHH3xQ9CoVsI9jffv2FSlIJZjCVnUeLS7YtWtXMTCGrbubHk7TXFxCvxVGU1JEJ9p1/gZFmU7TqMgsGt4tkgzLltK5xERqsXMntdi/nzofPUoZw4aR5bnnyBgdXSfSCciZgu7du4t0SXVp3769iGYxhQv5U70HCbr9P//8s4hilXPr2iwOhpGRCKORMtPTyWoxi3mwZdZS+9EKWrg6i7JzTIhYhE8qLSqi/Hzt4AW9VjhT9OLhXAHSBZiBEBZW6VaR0sNYDLaaCxYaNGhATZs2FVs11iebaZvJ7jTLLlAfWyZNaG+gds2aU1RUlHjfMnkyZQ8YQDc2bqTW9i812qNGi93BGP+acxZoXnnlFZHbHD9+vEt33lMQCStd9i5duogBKi3wProoK1asEH8PGjRI9zMMw/iAkBgqyi2kYmsZ5efm231sORnCDGSxWhyn2GwhVJSfQ2az+qox9CCRRsULjhY+ACCl4NxLbdy4sfAp2Hql3oWILP16Nq05Z6GRLcqoe+s4MQKHp4ISrSqjb0X2p0T2qVNk2LGD6tmdW1zbtnUiomUYJji4eiWDDv2WRAfOZFKx3SeFG+rZo1AjGcKj7FFouL2XHWvfD6NbWWnUtVkZxce3pMGDB2te03kWgrPfA1gAhpQiIlyvHS08eklJiZjaoDVYBnAevhznwfOzo2UYJhAU5JvIlGeiPPvrxJnLlPZnHpkKrFRgj3bzbqTSpDEDRXqgc+fONf4O5zSi13q06AbjhXBab1CmOucyDMPIgteiMtVxmuxgGYYJRvymR8sED1988UWgm1ArTJ48ucafDQYbsX3UYUfLeA2mp2Heb0xMTKCb4heQWsPCFm+Q2UZsH33Y0TI+AVNYlDXfsoFpO946EiCrjdg++tQ5R4ula2rKW1rvMYFHmajNqMM20kZW+3g9vwrODy8sQ8Xkf6y48AZ3kofu3mP8y65du2jKlCkuIvDYRx4OK9u0gCAHxHnQHYQSmqKMJhvvvvuuECRyZtu2bULsXY9gsZHiH6q+9JDNPj6ZyAoHmJiYKKQFFy1a5ItLMgEGE7Uxh3DTpk2OY99++63QI8ZqNi1WrVollN7gkKFo9uGHH/q7uQEBUpb4N6anp4u/IS0KSUvoZ+gRLDaCb3B+wTYjR47U/Zxs9vHZigEsuR0xYoTQT1XA0lQYFjcmts6qWHv37hVyY08++aSLc1aeds7bqsf0ro3z1q9fL3Rmhw8f7tCdZaoHeijQZIADgQ4E9l9++WXdz0GhDGu+oV2Mpc3u1MlkALnJefPmieXUEJNevXq1kM3UW7gDgsVGzqB6C/7d+F3pIZt9fOZoLRaL0EaFOIsCfnhQH9+xY4eoMoCSLgp4YqHrBTnAe++997brKWkC5UlYFa1rg/r16wtnCzUtaBkw1QcOA47jo48+ElKScCpateIU8BDEwAaA1CP0emWlbdu29NRTTwlBobFjxwpxfE8IJhsBBGCYwvX22297tCJUNvv4xNEighw2bBhduXKF3nzzTcfxkydPiqgVqjZjxoyhpKQkx3tt2rQRN+/BgwdFJFxdtK4N0D2BvCPSGazT6h2IKvAgxRJqTwmm5dXoVV27ds1RlcNTgsVGBQUF9N577wmVu+rMKpDJPj4Z4qvJIBUiUFSQxAsDCnC6/kBL85XRBroU6HXgBsFAGPQ2USEC1Ta0QCQCPU8ovyGlo0QmzP8JFhvhd4NqIhjQatmypcefk80+fn1kII0AMW1EQxhIca4E+/XXXwuBXIxs//HHH24/DyOj8kF1r834BqRnIHCM7nCrVq1EmRxPBiUQ2WEQDZEM6qfVRH5SdoLFRngwo2be/fffX63PyWYfvzpaJL1PnTolBqROnz7tkgRHzgZdfwxkqY3S4vw33niDhg4dWq1rM96D0V4UnnzmmWccx7Cfmpoqpn5p8frrr9P58+eF4DGugb8ZV4LFRhhDQa+outO7ZLOP1+pdDIMbAdO+MAApI5jDee7cOSHsXlNkthHbRx95ss0MwzB1FDnXuzEBIS4uTijKywSWhPpyVZJsNmL76AMbsaNlfAJyt3gx6rCNtJHZPpyjZRiG8TOco2UYhvEznDpgvEZ2dXwFriCgDdtHHXa0jNfIro7PFQS0Yfvow46W8Qkyq+NzBQFt2D763LGOlqst1D1kVcf3JWwjbWS1j88qLAwcOJCmTZumqk2g9tmanstO1r9whQV9uMKCPlxhoRKfVVj46aefhC4nV1iQA66woA9XWNCHKyxU4rPpXRCERt0wSJs5o1YJwV0FBQDhkoSEBFEd4ZdfflE9l6st+B+usKANV1ioHlxhwQfghwbpQ4T6zqhVQlCroADpwz179ohumVIZgastBAausKAPV1jwDK6w4AOUKrgpKSn01ltvubynVwnBGajUI/WAH+xLL71Eubm5Hn0/V1vwL1xhQRuusKANV1jwYY4WkSKeWrghawo0J5EXRAS1c+dOXzTNBa62UD2UCgsYlMCDb+nSpVRcXKz7OUUdH8igju8PgsVG3lZYADLYx2ePDCioz507l1auXOmivqNVCaFqBQVMfMb7eOqhxI0zXG2h9uEKC/4jWGzEFRYq8Wls3qlTJ5o6dSpt2LDBcUyrEkLVCgqzZs0SI7no/icnJ7tcm6st1C5cYcG/BIuNuMJCJazexXiN7Or4XEFAG7aPPvJkmxmGYeoocq53YwKCrOr4XEFAHbaPPlxhgfEZMqvj+wq2kTYy24dztAzDMH6Gc7QMwzB+hlMHjNfIro6vwBUEtGH7qMOOlvEa2dXxuYKANmwffdjRMj5BZnV8riCgDdtHnzrpaLl6wp2JrOr4voRtpI2s9vF6MAxPsoULF4qlsRCLXrx4Me3evdsXbWMCiDcVFqDyBUW13r17+7uZAcWbCgvBYqOaVliQzT5ePz6gVwoHC61XqGNhKd3mzZuFbCJz54L/0zNnzghhj4kTJ4pjnlZY6NmzZ200MeBAlwNC6L169RK6tEqFBU+Ed4LFRlV7ptA+gJ30kM0+Xke0kEbs16+fyK0gVwPlLCjOK5jNZqHoBcEXREMnTpxwvOeumkJVsOoEOpa48XHDY001UzvUtMICHDResuNNhYVgsZEz1amwIJt9vI5op0+fLl5wsB06dBDdAkjqKUCnNj4+XkidmUwmoTWrPK0gbWiz2ejSpUsiIoZST1Ugs4ZrIj0Bw6OWkOxTQeoKSoUF2BxiH55WWAgmnCsswIF4WmEh2FAqLOChJJOgt6d47WhRvQCOENHO5cuXRfSJCglK9xK6sshbGY1GioqKoiVLlojjUKT//PPPhRRaTk6OqqD00aNHRbSrfI7Fu2ufmlRYCCbwW4coenUrLAQLNa2wIBM+GeKDEISiE4sywc6OFrh7gkFfEk565syZ1LBhQ5FCcAci3sTERHEOU7soFRZwg2AgDAOd6GHgockwnlDTCguy4XUM/+KLL4rcC3JURUVFYkTaWZcSo4YYwUbEihkKuHGBVjUFZzDQgJFdPBVR0mL58uXeNpnxkJpWWGAYhZpWWJANryNalJhAhVmUmUFxRORfEQEpIG+FG/azzz4TBRIR7QKlmgIYMmSI6vVRPhxVbceNG0cNGjQQ1RcY/6NUWFD+jwAGLxGZ4MGJwUk1UIm46r5MAxu+IFhshFkGSpUFZ/TmyctmH1bvYrxGdnV8riCgDdtHn+Ab/mMYhqll5FzvxgQEWdXxuYKAOmwffbjCAuMzZFbH9xVsI21ktg/naBmGYfwM52gZhmH8DDtahmEYP8OOlmEYxs+EYeJwZmZmoNvBMAwjLTwYxjAM42f+B24ZT9oIIrBQAAAAAElFTkSuQmCC" width="346" height="78" class="img_ev3q"></p>
<p>接下来选择TestLOD，添加LODGroup组件，添加完事的组件面板应该如图：</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170109231316039-0bbde6e1169156ebaabcc333348ded14.jpg" width="354" height="165" class="img_ev3q"></p>
<p>常用参数详解：</p>
<ul>
<li>
<p>FadeMode：这个表示模型级别变化时候的过渡方式</p>
</li>
<li>
<p>LOD 0 ..：细节级别，百分比表示摄像机的可见范围（范围可调）</p>
</li>
</ul>
<p>接下来我们运行游戏，在场景视图中我们手动拖动主摄像机，打开profile（性能分析器），可以看到在不同距离的时候，GPU的性能参数有明显的不同：</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170109234522027-9935e6cdd039f16ab4d51edd0742bd50.jpg" width="263" height="199" class="img_ev3q"></p>
<p>（后）</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170109234641200-16e051bddfceb26a9920de2af1523f0e.jpg" width="219" height="179" class="img_ev3q"></p>
<p>（前）</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170109234534027-98d08165d1ebf1e15bdd4e72bcb8b878.jpg" width="303" height="205" class="img_ev3q"></p>
<p>其中绿线就表示批处理数目，明显发现后面的批处理数目降低了一个，蓝线表示pass数目，pass数目也降低了一个，后面的顶点数也将低了0.1k。为什么要强调这个？因为我们优化就是从减少DrawCall开始的，减少DrawCall需要使用批处理技术开始的。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mipmap纹理贴图金字塔">MipMap：纹理贴图金字塔<a href="https://www.iogl.cn/blog/11.MipMap%E4%B8%8ELOD%E6%98%AF%E4%BD%95%E7%89%A9#mipmap%E7%BA%B9%E7%90%86%E8%B4%B4%E5%9B%BE%E9%87%91%E5%AD%97%E5%A1%94" class="hash-link" aria-label="MipMap：纹理贴图金字塔的直接链接" title="MipMap：纹理贴图金字塔的直接链接">​</a></h2>
<p>正如上面所说，mipmap针对的是纹理贴图，大白话就是，一个模型身上会有贴图，当我们对这个贴图使用了MipMap技术之后，那么在游戏运行中这个模型的贴图会根据摄像机距离模型的远近而调整不同的不同质量的贴图显示。</p>
<p>在这个游戏场景中，我们给一个模型贴了一个木纹贴图，当我们没有对这个贴图使用MipMap技术的时候，无论我们摄像机距离模型的位置在哪，这张贴图永远都是显示一样的，这样是完全没有必要的，我们使用这个技术就是为了让当摄像机比较远的时候，你用在精细的贴图我们玩家也看不见，而且还浪费资源，提高了性能瓶颈。</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110165715043-0adabf91406796ce5f0678e8d78b822f.jpg" width="349" height="616" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110165724816-e52482277e84155b742267878fd46abd.jpg" width="291" height="158" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110165733956-9cc86a462b2d0dff8581c0d6c34c4c01.jpg" width="184" height="118" class="img_ev3q"></p>
<p>上面就是我们没有对贴图使用MipMap技术，然后测试的结果，那当我们使用了MinMap技术之后，结果又会是什么样子的呢？</p>
<p>发现图片大小变大了，这是因为我们使用MipMap技术之后，会对这个贴图生成八张精度质量不同的贴图，所以内存占用变大了。</p>
<p>所以关于这个技术是否使用，根据你的项目而定，什么都是有利有弊的。</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110170305167-dc20a0bc9888545105ecec34f590b2b6.jpg" width="348" height="543" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110170314843-76f1792bec9e12f6de69e39342ea4675.jpg" width="219" height="123" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/20170110170323108-5cf623f341451bd770b8c17b9a828e28.jpg" width="177" height="107" class="img_ev3q"></p>
<hr>
<p>原文链接：<a href="https://blog.csdn.net/penchaoo/article/details/54291529" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/penchaoo/article/details/54291529</a></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>图形基础</category>
        </item>
        <item>
            <title><![CDATA[创建depth/stencil attachment]]></title>
            <link>https://www.iogl.cn/blog/14.创建depthstencil attachment</link>
            <guid>https://www.iogl.cn/blog/14.创建depthstencil attachment</guid>
            <pubDate>Thu, 01 Aug 2024 15:47:56 GMT</pubDate>
            <description><![CDATA[创建过程]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建过程">创建过程<a href="https://www.iogl.cn/blog/14.%E5%88%9B%E5%BB%BAdepthstencil%20attachment#%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B" class="hash-link" aria-label="创建过程的直接链接" title="创建过程的直接链接">​</a></h2>
<ol>
<li>创建一个depth/stencil image</li>
<li>查找image memory requirements</li>
<li>分配、绑定image memory</li>
<li>设置image layout</li>
<li>创建depth/stencil imageview</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/14.%E5%88%9B%E5%BB%BAdepthstencil%20attachment#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkFormat image_format </span><span class="token operator">=</span><span class="token plain"> VK_FORMAT_D16_UNORM</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">//支持depth\stencil的format</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkImageCreateInfo image_info </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkFormatProperties props</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkGetPhysicalDeviceFormatProperties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">physical_device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> image_format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">linearTilingFeatures </span><span class="token operator">&amp;</span><span class="token plain"> VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tiling </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_TILING_LINEAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">optimalTilingFeatures </span><span class="token operator">&amp;</span><span class="token plain"> VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tiling </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_TILING_OPTIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sType </span><span class="token operator">=</span><span class="token plain"> VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pNext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">imageType </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_TYPE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> image_format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">extent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">width </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">extent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">height </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">extent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">depth </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">mipLevels </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">arrayLayers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">samples </span><span class="token operator">=</span><span class="token plain"> VK_SAMPLE_COUNT_1_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">initialLayout </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_LAYOUT_UNDEFINED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">usage </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">queueFamilyIndexCount </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pQueueFamilyIndices </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sharingMode </span><span class="token operator">=</span><span class="token plain"> VK_SHARING_MODE_EXCLUSIVE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">flags </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkImage image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkCreateImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">image_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkMemoryRequirements mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkGetImageMemoryRequirements</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkMemoryAllocateInfo mem_alloc </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mem_alloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sType </span><span class="token operator">=</span><span class="token plain"> VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mem_alloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pNext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mem_alloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">memoryTypeIndex </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mem_alloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">allocationSize </span><span class="token operator">=</span><span class="token plain"> mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkDeviceMemory mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkAllocateMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mem_alloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkBindImageMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkImageView view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkImageViewCreateInfo view_info </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sType </span><span class="token operator">=</span><span class="token plain"> VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pNext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">image </span><span class="token operator">=</span><span class="token plain"> image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> image_format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">r </span><span class="token operator">=</span><span class="token plain"> VK_COMPONENT_SWIZZLE_R</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">g </span><span class="token operator">=</span><span class="token plain"> VK_COMPONENT_SWIZZLE_G</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">b </span><span class="token operator">=</span><span class="token plain"> VK_COMPONENT_SWIZZLE_B</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">a </span><span class="token operator">=</span><span class="token plain"> VK_COMPONENT_SWIZZLE_A</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">subresourceRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aspectMask </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_ASPECT_DEPTH_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">//或者是VK_IMAGE_ASPECT_STENCIL_BIT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">subresourceRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">baseMipLevel </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">subresourceRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">levelCount </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">subresourceRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">baseArrayLayer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">subresourceRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">layerCount </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">viewType </span><span class="token operator">=</span><span class="token plain"> VK_IMAGE_VIEW_TYPE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">flags </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkCreateImageView</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">view_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>图形基础</category>
        </item>
        <item>
            <title><![CDATA[创建mvp ubo]]></title>
            <link>https://www.iogl.cn/blog/15.创建mvp ubo</link>
            <guid>https://www.iogl.cn/blog/15.创建mvp ubo</guid>
            <pubDate>Thu, 01 Aug 2024 15:47:18 GMT</pubDate>
            <description><![CDATA[创建过程]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建过程">创建过程<a href="https://www.iogl.cn/blog/15.%E5%88%9B%E5%BB%BAmvp%20ubo#%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B" class="hash-link" aria-label="创建过程的直接链接" title="创建过程的直接链接">​</a></h2>
<ol>
<li>创建一个uniform buffer</li>
<li>查找buffer memory requirements</li>
<li>分配、绑定buffer memory</li>
<li>map buffer memory</li>
<li>拷贝mvp data to buffer memory</li>
<li>unmap buffer memory</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/15.%E5%88%9B%E5%BB%BAmvp%20ubo#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 projection </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">perspective</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">radians</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">45.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.1f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 view </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">lookAt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 相机在世界坐标系中的位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// 看向的目标位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// 相机up方向向量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">				 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 model </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">mat4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 clip </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">mat4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token operator">-</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 mvp </span><span class="token operator">=</span><span class="token plain"> clip </span><span class="token operator">*</span><span class="token plain"> projection </span><span class="token operator">*</span><span class="token plain"> view </span><span class="token operator">*</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkBuffer ubo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkBufferCreateInfo buf_info </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sType </span><span class="token operator">=</span><span class="token plain"> VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pNext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">usage </span><span class="token operator">=</span><span class="token plain"> VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">size </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">queueFamilyIndexCount </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pQueueFamilyIndices </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sharingMode </span><span class="token operator">=</span><span class="token plain"> VK_SHARING_MODE_EXCLUSIVE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">flags </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkCreateBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">buf_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">ubo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkMemoryRequirements mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkGetBufferMemoryRequirements</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ubo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkDeviceMemory mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkMemoryAllocateInfo alloc_info </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alloc_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sType </span><span class="token operator">=</span><span class="token plain"> VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alloc_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pNext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alloc_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">memoryTypeIndex </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alloc_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">allocationSize </span><span class="token operator">=</span><span class="token plain"> mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkAllocateMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">alloc_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkBindBufferMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ubo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">pData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkMapMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mem_reqs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">&amp;</span><span class="token plain">pData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">memcpy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkUnmapMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>图形基础</category>
        </item>
        <item>
            <title><![CDATA[Vulkan vertex buffer绑定过程]]></title>
            <link>https://www.iogl.cn/blog/13.Vulkan vertex buffer绑定过程</link>
            <guid>https://www.iogl.cn/blog/13.Vulkan vertex buffer绑定过程</guid>
            <pubDate>Thu, 28 Dec 2023 15:11:34 GMT</pubDate>
            <description><![CDATA[代码实战]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码实战">代码实战<a href="https://www.iogl.cn/blog/13.Vulkan%20vertex%20buffer%E7%BB%91%E5%AE%9A%E8%BF%87%E7%A8%8B#%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98" class="hash-link" aria-label="代码实战的直接链接" title="代码实战的直接链接">​</a></h2>
<p>我们用<code>indirect draw</code>绘制6个不同位置的三角形，效果如下：</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/65d40e76ed5251bbdf967ad36292d56b-b74900fe6acee48dcf61f12627dcb7c3.png" width="905" height="659" class="img_ev3q"></p>
<p><strong>重点：具备<code>layout(location = xx) in</code> 格式描述的资源就是 <code>vertex buffer</code>。</strong></p>
<p>vs shader如下， <code>inPos</code>，<code>inColor</code>，<code>instancePos</code>则是<code>vertext buffer</code>数据：</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//vs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#version 450 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 0) in vec3 inPos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 1) in vec3 inColor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 2) in vec3 instancePos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout(location = 0) out vec3 fragColor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void main() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gl_Position = vec4(inPos, 1.0) + vec4(instancePos, 1.0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gl_Position.y = -gl_Position.y;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fragColor = inColor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>vertex buffer</code>的布局分布如下：</p>
<ul>
<li><code>location 0</code>的<code>inPos</code>、<code>location 1</code>的<code>inColor</code>使用<code>binding 0</code></li>
<li><code>location 2</code>的<code>instancePos</code>使用<code>binding 1</code></li>
</ul>
<p>代码侧调用<code>vkCmdBindVertexBuffers</code>告诉gpu从哪个binding位置读取顶点数据（即<code>vkCmdBindVertexBuffers</code>的<code>firstBinding</code>参数，与shader中<code>layout</code>的<code>binding</code>完全没关系，这点在后面的<code>descriptor</code>章节再讲）。</p>
<p>gpu知道了从哪里读数据，但是怎么读？这就用到了<code>VkVertexInputBindingDescription</code>和 <code>VkVertexInputAttributeDescription</code>两个结构体，它们在创建<code>pipeline</code>时被使用。</p>
<p>结构体详细说明：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">VkVertexInputBindingDescription</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain">             binding</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">//数据绑定位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain">             stride</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">//连续两个数据之间的间隔</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VkVertexInputRate    inputRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">//两种方式， per-vertex:对每个顶点输入， per-instance:对每个实例输入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> VkVertexInputBindingDescription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">VkVertexInputAttributeDescription</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain">    location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">//在shader中location一致</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain">    binding</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">//数据绑定位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VkFormat    format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">//数据格式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain">    offset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">//属性相对于顶点开始位置的偏移</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> VkVertexInputAttributeDescription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里需要注意的是<code>VkVertexInputBindingDescription::inputRate</code>， 它代表两种数据输入：</p>
<ul>
<li>VK_VERTEX_INPUT_RATE_VERTEX：per-vertex，按图元的定点数分</li>
<li>VK_VERTEX_INPUT_RATE_INSTANCE：per-instance，按图元数分配</li>
</ul>
<p>本例画6个三角形，对于编号<code>i</code>的三角形，会读取顶点数据<code>vertices[0]</code>,<code>vertices[1]</code>,<code>vertices[2]</code>以及中心点位置<code>instancePosData[i]</code>。</p>
<p>本例完整代码说明：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/* {inPosition, inColor}*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">Vertex</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    vec3 pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    vec3 color</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// vertex data of triangle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">vector</span><span class="token operator">&lt;</span><span class="token plain">Vertex</span><span class="token operator">&gt;</span><span class="token plain"> vertices </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.2f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.2f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.2f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token number">0.2f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token operator">-</span><span class="token number">0.2f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 6 triangle instance center point postion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">vector</span><span class="token operator">&lt;</span><span class="token plain">Vec3</span><span class="token operator">&gt;</span><span class="token plain"> instancePosData </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token operator">-</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token operator">-</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.45</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//create vertex buffer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkDeviceSize vertexBufferSize </span><span class="token operator">=</span><span class="token plain"> vertices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkDeviceSize instancePosBufferSize </span><span class="token operator">=</span><span class="token plain"> instancePosData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">createBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        VK_BUFFER_USAGE_VERTEX_BUFFER_BIT </span><span class="token operator">|</span><span class="token plain"> VK_BUFFER_USAGE_TRANSFER_DST_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT </span><span class="token operator">|</span><span class="token plain"> VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">&amp;</span><span class="token plain">vertexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">vertexMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        vertexBufferSize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> vertices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">createBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VK_BUFFER_USAGE_VERTEX_BUFFER_BIT </span><span class="token operator">|</span><span class="token plain"> VK_BUFFER_USAGE_TRANSFER_DST_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT </span><span class="token operator">|</span><span class="token plain"> VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">&amp;</span><span class="token plain">instancePosBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">instancePosMemory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    instancePosBufferSize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">instancePosData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VkDeviceSize offsets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//三角形顶点位置、颜色数据从binding 0读取</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkCmdBindVertexBuffers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    commandBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// firstBinding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// bindingCount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">&amp;</span><span class="token plain">vertexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    offsets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//三角形的中心点位置从binding 1读取</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vkCmdBindVertexBuffers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    commandBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// firstBinding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// bindingCount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">&amp;</span><span class="token plain">instancePosBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    offsets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 读取顶点的方式、以及顶点数据布局传入graphicsPipelineCreateInfo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">vector</span><span class="token operator">&lt;</span><span class="token plain">VkVertexInputBindingDescription</span><span class="token operator">&gt;</span><span class="token plain"> bindingDescription </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">binding</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">stride</span><span class="token operator">=</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">inputRate </span><span class="token operator">=</span><span class="token plain"> VK_VERTEX_INPUT_RATE_VERTEX</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">//逐顶点方式获取三角形顶点数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">binding</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">stride</span><span class="token operator">=</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">inputRate </span><span class="token operator">=</span><span class="token plain"> VK_VERTEX_INPUT_RATE_INSTANCE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">//逐实例方式获取三角形位置数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">vector</span><span class="token operator">&lt;</span><span class="token plain">VkVertexInputAttributeDescription</span><span class="token operator">&gt;</span><span class="token plain"> attributeDescriptions </span><span class="token operator">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">binding </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> VK_FORMAT_R32G32B32_SFLOAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">offsetof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// inPos: binding 0, location 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">binding </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> VK_FORMAT_R32G32B32_SFLOAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">offsetof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> color</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// inColor: binding 0, location 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">binding </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> VK_FORMAT_R32G32B32_SFLOAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// instancePos: binding 1, location 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vkPipelineVertexInputStateCreateInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pVertexBindingDescriptions </span><span class="token operator">=</span><span class="token plain"> bindingDescription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vkPipelineVertexInputStateCreateInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pVertexAttributeDescriptions </span><span class="token operator">=</span><span class="token plain"> attributeDescriptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vkGraphicsPipelineCreateInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pVertexInputState </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">vkPipelineVertexInputStateCreateInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上面从代码到<code>shader</code>的<code>vertex buffer</code>数据绑定过程可以归纳成这张图：</p>
<p><img decoding="async" loading="lazy" alt="img" src="https://www.iogl.cn/assets/images/8713daef75640687c030b03e04e8abdf-216d6e8a28683654fc3641e858a293de.png" width="1673" height="763" class="img_ev3q"></p>
<p>这篇文章对vertext buffer的处理逻辑讲的很详细，可以扩展阅读一下：</p>
<p><a href="https://github.com/KhronosGroup/Vulkan-Guide/blob/main/chapters/vertex_input_data_processing.adoc" target="_blank" rel="noopener noreferrer">https://github.com/KhronosGroup/Vulkan-Guide/blob/main/chapters/vertex_input_data_processing.adoc</a></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>图形基础</category>
        </item>
        <item>
            <title><![CDATA[一种简单加载vulkan动态库的方法]]></title>
            <link>https://www.iogl.cn/blog/12.一种简单加载vulkan动态库的方法</link>
            <guid>https://www.iogl.cn/blog/12.一种简单加载vulkan动态库的方法</guid>
            <pubDate>Thu, 28 Dec 2023 14:59:58 GMT</pubDate>
            <description><![CDATA[背景]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="https://www.iogl.cn/blog/12.%E4%B8%80%E7%A7%8D%E7%AE%80%E5%8D%95%E5%8A%A0%E8%BD%BDvulkan%E5%8A%A8%E6%80%81%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95#%E8%83%8C%E6%99%AF" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2>
<p>最近在国产linux环境上适配vulkan应用，一般系统会自带<code>libvulkan.so.1</code>但是没有<code>libvulkan.so</code>，而<code>libvulkan.so.1</code>无法通过find_library找到，如果系统源没有<code>vulkan sdk</code>或者<code>vulkan loader</code>，这时就得手工下载代码编译<code>vulkan sdk</code>或者<code>vulkan loader</code>，过程中可能还得安装各种依赖，升级cmake，非常繁琐，安装完成后使用下面的方式将vulkan动态库链接到目标应用：</p>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">find_package(Vulkan)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (NOT Vulkan_FOUND)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    find_library(Vulkan_LIBRARIES NAMES vulkan REQUIRED)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">endif ()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">include_directories(${Vulkan_INCLUDE_DIRS})</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">target_link_libraries (${PROJECT_NAME} ${Vulkan_LIBRARIES})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在麒麟、龙芯、鲲鹏等各种系统上都经历过手工编译<code>vulkan sdk</code>，为了更快的测试vulkan兼容性以及调试应用，一直在找更简易的方法。</p>
<p>闲暇之余看到了这篇文章  <a href="https://link.zhihu.com/?target=https%3A//djang86.blogspot.com/2019/01/what-is-vknoprototypes.html" target="_blank" rel="noopener noreferrer">WHAT IS VK_NO_PROTOTYPES</a>，萌生了写一个简易的vulkan动态库加载方法的想法，不用安装<code>vulkan sdk</code>或者<code>vulkan loader</code>，直接使用系统上的<code>libvulkan.so.1</code>(一般都会自带，没有的话执行<code>sudo apt install libvulkan1</code>安装)。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码示例">代码示例<a href="https://www.iogl.cn/blog/12.%E4%B8%80%E7%A7%8D%E7%AE%80%E5%8D%95%E5%8A%A0%E8%BD%BDvulkan%E5%8A%A8%E6%80%81%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="代码示例的直接链接" title="代码示例的直接链接">​</a></h2>
<p>基本原理是初始化时使用 <code>dlopen</code>、<code>dlsym</code>加载vulkan动态库中的api函数指针，app直接使用这些api，这里我用了一个开源的动态库加载工具<code>dylib</code>，它支持多系统平台:</p>
<p><a href="https://github.com/martin-olivier/dylib" target="_blank" rel="noopener noreferrer">GitHub - martin-olivier/dylib: C++ cross-platform wrapper around dynamic loading of shared libraries (dll, so, dylib)</a></p>
<p>以<code>vkCreateInstance</code>函数地址的加载过程为例：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//加载vulkan动态库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dylib </span><span class="token function" style="color:rgb(80, 250, 123)">lib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"libvulkan.so.1"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//定义函数指针vkCreateInstance, PFN_vkCreateInstance的声明在vulkan_core.h中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PFN_vkCreateInstance vkCreateInstance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//从动态库中获取函数地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">auto</span><span class="token plain"> vkCreateInstance </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">PFN_vkCreateInstance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">lib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token generic-function function" style="color:rgb(80, 250, 123)">get_function</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">PFN_vkCreateInstance</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"vkCreateInstance"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里有个小tip：<code>vkCreateInstance</code> 在<code>vulkan_core.h</code>中的声明是被宏<code>VK_NO_PROTOTYPES</code>括起来的，我们得在cmake中添加该宏定义<code>add_definitions(-DVK_NO_PROTOTYPES)</code>，不让 <code>vulkan_core.h</code>中对原生的vk api进行声明，这样我们就可以在<code>load.h</code>中对原生的vulkan api进行声明了。</p>
<p>附上整个<code>load.h</code>的源码，在app初始化时调用<code>vk_loader_init()</code>即可加载vulkan动态库中所有的函数地址：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">"dylib/dylib.hpp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">"vulkan/vulkan_core.h"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">WIN32</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">_WIN32</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">_WIN32_</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">WIN64</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">_WIN64</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">_WIN64_</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">VULKAN_LIB</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">"vulkan-1.dll"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">elif</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">ANDROID</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression"> </span><span class="token macro property expression operator">||</span><span class="token macro property expression"> </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">defined</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">_ANDROID_</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">VULKAN_LIB</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">"libvulkan.so"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">VULKAN_LIB</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">"libvulkan.so.1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name function" style="color:rgb(80, 250, 123)">APPLY_PFN_DEF_VK_FUNCTIONS</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetInstanceProcAddr</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateInstance</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEnumerateInstanceExtensionProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEnumerateInstanceLayerProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyInstance</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEnumeratePhysicalDevices</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                            </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceFeatures</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceFormatProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceImageFormatProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceQueueFamilyProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceMemoryProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetDeviceProcAddr</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateDevice</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroySurfaceKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceSurfaceSupportKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceSurfaceCapabilitiesKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceSurfaceFormatsKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceSurfacePresentModesKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateSwapchainKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroySwapchainKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetSwapchainImagesKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                               </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkAcquireNextImageKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkQueuePresentKHR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyDevice</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEnumerateDeviceExtensionProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEnumerateDeviceLayerProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetDeviceQueue</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkQueueSubmit</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkQueueWaitIdle</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDeviceWaitIdle</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkAllocateMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkFreeMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                          </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkMapMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkUnmapMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkFlushMappedMemoryRanges</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkInvalidateMappedMemoryRanges</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetDeviceMemoryCommitment</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkBindBufferMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkBindImageMemory</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetBufferMemoryRequirements</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetImageMemoryRequirements</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                          </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetImageSparseMemoryRequirements</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPhysicalDeviceSparseImageFormatProperties</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkQueueBindSparse</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateFence</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyFence</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkResetFences</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetFenceStatus</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkWaitForFences</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateSemaphore</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroySemaphore</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetEventStatus</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkSetEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                            </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkResetEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                          </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateQueryPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyQueryPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetQueryPoolResults</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateBufferView</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyBufferView</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetImageSubresourceLayout</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateImageView</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyImageView</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateShaderModule</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyShaderModule</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreatePipelineCache</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyPipelineCache</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetPipelineCacheData</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkMergePipelineCaches</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateGraphicsPipelines</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateComputePipelines</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyPipeline</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreatePipelineLayout</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyPipelineLayout</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                               </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateSampler</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroySampler</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateDescriptorSetLayout</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyDescriptorSetLayout</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                          </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateDescriptorPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyDescriptorPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                               </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkResetDescriptorPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkAllocateDescriptorSets</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkFreeDescriptorSets</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkUpdateDescriptorSets</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateFramebuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyFramebuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateRenderPass</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyRenderPass</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkGetRenderAreaGranularity</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                            </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCreateCommandPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkDestroyCommandPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkResetCommandPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkAllocateCommandBuffers</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkFreeCommandBuffers</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkBeginCommandBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkEndCommandBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkResetCommandBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBindPipeline</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetViewport</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetScissor</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetLineWidth</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetDepthBias</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetBlendConstants</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetDepthBounds</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetStencilCompareMask</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                            </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetStencilWriteMask</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetStencilReference</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBindDescriptorSets</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                               </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBindIndexBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBindVertexBuffers</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDraw</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDrawIndexed</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDrawIndirect</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDrawIndexedIndirect</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                              </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDispatch</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdDispatchIndirect</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdCopyBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdCopyImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBlitImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                        </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdCopyBufferToImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdCopyImageToBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdUpdateBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdFillBuffer</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdClearColorImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdClearDepthStencilImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                           </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdClearAttachments</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                 </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdResolveImage</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                     </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdSetEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdResetEvent</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdWaitEvents</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdPipelineBarrier</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBeginQuery</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                       </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdEndQuery</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdResetQueryPool</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdWriteTimestamp</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                   </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdCopyQueryPoolResults</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                             </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdPushConstants</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdBeginRenderPass</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                  </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdNextSubpass</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                      </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdEndRenderPass</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                                    </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression function" style="color:rgb(80, 250, 123)">PFN_DEF</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">vkCmdExecuteCommands</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name function" style="color:rgb(80, 250, 123)">DEFINE_VK_FUNCTION_MACRO</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">function</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression">PFN_</span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">##</span><span class="token macro property expression">function function</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name function" style="color:rgb(80, 250, 123)">GET_VK_FUNCTION_PROCADDR</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">function</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression">                         </span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token macro property"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token macro property">    </span><span class="token macro property expression">function </span><span class="token macro property expression operator">=</span><span class="token macro property expression"> </span><span class="token macro property expression keyword" style="color:rgb(189, 147, 249);font-style:italic">reinterpret_cast</span><span class="token macro property expression operator">&lt;</span><span class="token macro property expression">PFN_</span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">##</span><span class="token macro property expression">function</span><span class="token macro property expression operator">&gt;</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">lib</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token macro property expression">get_function</span><span class="token macro property expression operator">&lt;</span><span class="token macro property expression">PFN_</span><span class="token macro property punctuation" style="color:rgb(248, 248, 242)">##</span><span class="token macro property expression">function</span><span class="token macro property expression operator">&gt;</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property expression">#function</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">APPLY_PFN_DEF_VK_FUNCTIONS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">DEFINE_VK_FUNCTION_MACRO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vk_loader_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> dylib </span><span class="token function" style="color:rgb(80, 250, 123)">lib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">VULKAN_LIB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">APPLY_PFN_DEF_VK_FUNCTIONS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GET_VK_FUNCTION_PROCADDR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目实战">项目实战<a href="https://www.iogl.cn/blog/12.%E4%B8%80%E7%A7%8D%E7%AE%80%E5%8D%95%E5%8A%A0%E8%BD%BDvulkan%E5%8A%A8%E6%80%81%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95#%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98" class="hash-link" aria-label="项目实战的直接链接" title="项目实战的直接链接">​</a></h2>
<p>这是整个测试demo的项目地址：</p>
<p><a href="https://gitee.com/sumcai/MiniVulkanTriangle" target="_blank" rel="noopener noreferrer">sumcai/MiniVulkanTriangle (gitee.com)</a></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>图形基础</category>
        </item>
        <item>
            <title><![CDATA[Framebuffer用法]]></title>
            <link>https://www.iogl.cn/blog/09.Framebuffer用法</link>
            <guid>https://www.iogl.cn/blog/09.Framebuffer用法</guid>
            <pubDate>Sun, 26 Dec 2021 20:14:37 GMT</pubDate>
            <description><![CDATA[opengl中framebuffer称为帧缓冲，它是一个内存缓冲区，如果把渲染到屏幕的颜色缓冲，深度缓冲，模板缓冲都缓存到内存中，那么就叫帧缓冲。]]></description>
            <content:encoded><![CDATA[<p>opengl中framebuffer称为帧缓冲，它是一个内存缓冲区，如果把渲染到屏幕的颜色缓冲，深度缓冲，模板缓冲都缓存到内存中，那么就叫帧缓冲。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="framebuffer用法">Framebuffer用法<a href="https://www.iogl.cn/blog/09.Framebuffer%E7%94%A8%E6%B3%95#framebuffer%E7%94%A8%E6%B3%95" class="hash-link" aria-label="Framebuffer用法的直接链接" title="Framebuffer用法的直接链接">​</a></h2>
<p>framebuffer通常用在离屏渲染或者后处理上，主要涉及这几个函数：</p>
<ul>
<li><code>glGenFramebuffers</code> ：创建framebuffer</li>
<li><code>glBindFramebuffer</code> ：绑定framebuffer</li>
<li><code>glFramebufferTexture2D</code> ：将纹理附加到framebuffer到，实现绘制到纹理</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/09.Framebuffer%E7%94%A8%E6%B3%95#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<p>我们模拟一个后处理操作，将<a href="http://iogl.cn/opengl/blend/" target="_blank" rel="noopener noreferrer">Blend用法</a>中的绘制结果画在屏幕中央，并且对结果的颜色取反向，让我们看看具体代码：</p>
<p><code>05.FBTexture.fs</code>内容：</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#version 330 core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">in vec2 TexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uniform sampler2D tex1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">out vec4 FragColor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FragColor = vec4(vec3(1.0 - texture(tex1, TexCoord)), 1.0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>实现代码：</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">void display( GLFWwindow* window )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 1.绑定framebuffer，这样可以绘制到附加的纹理fbTexture上</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnable(GL_DEPTH_TEST);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnable(GL_BLEND);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClearColor( 0, 0, 0.4, 0 );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUseProgram(boxProgramID);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float) 5 / (float)5, 0.1f, 100.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 view = glm::lookAt(glm::vec3(1,2,3), glm::vec3(0,0,0), glm::vec3(0,1,0));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 model = glm::mat4(1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 mvp = projection * view * model;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.画地面</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint mvpId = glGetUniformLocation(boxProgramID, "MVP");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &amp;mvp[0][0]);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, floorTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 6);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 3.画立方体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, texture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 36);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 4.画blend物体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model = glm::mat4(1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model = glm::translate(model, glm::vec3(0, 0, 1.01f));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mvp = projection * view * model;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &amp;mvp[0][0]);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, blendTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 6);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 5.对fbTexture采样后处理将绘制到屏幕</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDisable(GL_DEPTH_TEST);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDisable(GL_BLEND);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindFramebuffer(GL_FRAMEBUFFER, 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClearColor(0.3f, 0.3f, 0.3f, 1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClear(GL_COLOR_BUFFER_BIT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUseProgram(screenProgramID);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(screenVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, fbTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 6);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void prepare() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    boxProgramID = LoadShaders( "data/shader/03.MVP.vs", "data/shader/03.MVP.fs" );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const GLfloat g_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    float fllor_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f,  5.0f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f, -5.0f,  1.0f, 1.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    float blend_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f, -0.5f,  0.0f,  0.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f,  0.5f,  0.0f,  1.0f,  0.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 1.VAO、VBO的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.地面贴图</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(fllor_vertex_buffer_data), fllor_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 3.blend贴图</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;BlendVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(BlendVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO3;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(blend_vertex_buffer_data), blend_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    floorTexture = loadTexture("data/img/33.png");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    texture = loadTexture("data/img/11.jpg");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    blendTexture = loadTexture("data/img/chick.png");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 4.创建framebuffer以及附加的纹理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenFramebuffers(1, &amp;framebuffer);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenTextures(1, &amp;fbTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, fbTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 512, 512, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, fbTexture, 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 5.绘制到屏幕的shader和顶点数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    screenProgramID = LoadShaders( "data/shader/02.Texture.vs", "data/shader/05.FBTexture.fs" );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const GLfloat g_screen_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.0f,  0.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.0f,  0.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.0f,   1.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.0f,  0.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.0f,  1.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.0f,  1.0f,  1.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // VAO、VBO的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint screenVBO;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;screenVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(screenVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;screenVBO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, screenVBO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(g_screen_vertex_buffer_data), g_screen_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>最终显示结果：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/e2fabf1d21d3bcb698475c4adc3fd233.png" alt="1640529248087" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>framebuffe</category>
        </item>
        <item>
            <title><![CDATA[Blend用法]]></title>
            <link>https://www.iogl.cn/blog/08.Blend用法</link>
            <guid>https://www.iogl.cn/blog/08.Blend用法</guid>
            <pubDate>Thu, 16 Dec 2021 22:29:30 GMT</pubDate>
            <description><![CDATA[opengl的blend用于颜色混合 ，如果不用混合，两张贴图贴在一起时，前面的贴图会覆盖后面的贴图，加上混合功能，两张贴图可以很好的贴合在一起。用代码演示一下用法。]]></description>
            <content:encoded><![CDATA[<p>opengl的blend用于颜色混合 ，如果不用混合，两张贴图贴在一起时，前面的贴图会覆盖后面的贴图，加上混合功能，两张贴图可以很好的贴合在一起。用代码演示一下用法。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blend开启方法">blend开启方法<a href="https://www.iogl.cn/blog/08.Blend%E7%94%A8%E6%B3%95#blend%E5%BC%80%E5%90%AF%E6%96%B9%E6%B3%95" class="hash-link" aria-label="blend开启方法的直接链接" title="blend开启方法的直接链接">​</a></h2>
<p>blend主要使用下面几个函数：</p>
<ul>
<li><code>glEnable(GL_BLEND)</code>: 开启blend功能</li>
<li><code>glBlendFunc(GLenum sfactor, GLenum dfactor)</code>: sfactor源因子，dfactor目标因子</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/08.Blend%E7%94%A8%E6%B3%95#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<p>我们先画一个普通场景</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">void display( GLFWwindow* window )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClearColor( 0, 0, 0.4, 0 );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUseProgram(boxProgramID);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float) 5 / (float)5, 0.1f, 100.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 view = glm::lookAt(glm::vec3(1,2,3), glm::vec3(0,0,0), glm::vec3(0,1,0));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 model = glm::mat4(1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm::mat4 mvp = projection * view * model;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 1.画地面</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint mvpId = glGetUniformLocation(boxProgramID, "MVP");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &amp;mvp[0][0]);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, floorTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 6);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.画立方体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, texture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 36);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 3.画blend物体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model = glm::mat4(1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model = glm::translate(model, glm::vec3(0, 0, 1.01f));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mvp = projection * view * model;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glUniformMatrix4fv(mvpId, 1, GL_FALSE, &amp;mvp[0][0]);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindTexture(GL_TEXTURE_2D, blendTexture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glDrawArrays(GL_TRIANGLES, 0, 6);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void prepare() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    boxProgramID = LoadShaders( "data/shader/03.MVP.vs", "data/shader/03.MVP.fs" );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const GLfloat g_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f, -0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f, -0.5f,  1.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.5f,  0.5f,  0.5f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f,  0.5f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -0.5f,  0.5f, -0.5f,  0.0f, 1.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    float fllor_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f,  5.0f,  0.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f,  5.0f,  1.0f, 0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            -5.0f, -0.5f, -5.0f,  0.0f, 1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            5.0f, -0.5f, -5.0f,  1.0f, 1.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    float blend_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f, -0.5f,  0.0f,  0.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            0.0f,  0.5f,  0.0f,  0.0f,  0.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f, -0.5f,  0.0f,  1.0f,  1.0f,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            1.0f,  0.5f,  0.0f,  1.0f,  0.0f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 1.VAO1、VBO的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(VAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.地面贴图</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(FloorVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(fllor_vertex_buffer_data), fllor_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.blend贴图</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenVertexArrays(1, &amp;BlendVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindVertexArray(BlendVAO);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO3;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glGenBuffers(1, &amp;VBO3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBindBuffer(GL_ARRAY_BUFFER, VBO3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glBufferData(GL_ARRAY_BUFFER, sizeof(blend_vertex_buffer_data), blend_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 纹理数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    floorTexture = loadTexture("data/img/33.png");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    texture = loadTexture("data/img/11.jpg");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    blendTexture = loadTexture("data/img/chick.png");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glEnable(GL_DEPTH_TEST);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>都是普通贴图操作，显示效果如下：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/8fdf692cbf38ffeae519a368949c634e.png" alt="1639699366516" class="img_ev3q"></p>
<p>因为是直接贴图覆盖的，所以小鸡周边alpha为0的颜色显示为黑色，如果加上blend功能，则可以看到后面图片的内容了：</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnable(GL_BLEND);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴��板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>最终显示效果：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/3eddf9c37aea8e93be427111b162f78e.png" alt="1639699653817" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>blend</category>
        </item>
        <item>
            <title><![CDATA[Stencil用法]]></title>
            <link>https://www.iogl.cn/blog/07.Stencil用法</link>
            <guid>https://www.iogl.cn/blog/07.Stencil用法</guid>
            <pubDate>Wed, 15 Dec 2021 22:13:01 GMT</pubDate>
            <description><![CDATA[opengl的stencil称为模板测试，和深度测试一样，是Opengl中常用的技术。概念就不解释了，直接演示用法。我们实现对一个立方体盒子进行高亮描边。]]></description>
            <content:encoded><![CDATA[<p>opengl的stencil称为模板测试，和深度测试一样，是Opengl中常用的技术。概念就不解释了，直接演示用法。我们实现对一个立方体盒子进行高亮描边。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stencil用法">stencil用法<a href="https://www.iogl.cn/blog/07.Stencil%E7%94%A8%E6%B3%95#stencil%E7%94%A8%E6%B3%95" class="hash-link" aria-label="stencil用法的直接链接" title="stencil用法的直接链接">​</a></h2>
<p>stencil最简单的用法是使用下面三个函数：</p>
<ul>
<li><code>glStencilMask(GLuint value)</code>: 位遮罩， 0x00设置模板缓冲不可写入；value=0xFF设置可以写入。</li>
<li><code>glStencilFunc(GLenum func, GLint ref, GLuint mask)</code>: 用ref值与存储的模板值比较，func为比较方法。</li>
<li><code>glStencilOp(GLenum sfail, GLenum dpfail, GLenum dppass)</code>: 模板值的写入策略</li>
</ul>
<p>简单来说，<code>glStencilMask</code>是开关，开了才可以写入模板值；<code>glStencilFunc</code>是写入模板值的前提条件；<code>glStencilOp</code>是模板值的具体写入方法。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/07.Stencil%E7%94%A8%E6%B3%95#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="普通流程">普通流程<a href="https://www.iogl.cn/blog/07.Stencil%E7%94%A8%E6%B3%95#%E6%99%AE%E9%80%9A%E6%B5%81%E7%A8%8B" class="hash-link" aria-label="普通流程的直接链接" title="普通流程的直接链接">​</a></h3>
<p>我们先准备好了画一个立方体盒子的代码：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint boxProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> GLFWwindow</span><span class="token operator">*</span><span class="token plain"> window </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glClearColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glClear</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> GL_COLOR_BUFFER_BIT </span><span class="token operator">|</span><span class="token plain"> GL_DEPTH_BUFFER_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 设置好坐标变化的mvp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 projection </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">perspective</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">radians</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">45.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.1f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 view </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">lookAt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 model </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">mat4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 mvp </span><span class="token operator">=</span><span class="token plain"> projection </span><span class="token operator">*</span><span class="token plain"> view </span><span class="token operator">*</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 画立方体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUseProgram</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">boxProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint mvpId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">glGetUniformLocation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">boxProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"MVP"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUniformMatrix4fv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mvpId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glDrawArrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TRIANGLES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">36</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">prepare</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    boxProgramID </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">LoadShaders</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"data/shader/03.MVP.vs"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"data/shader/03.MVP.fs"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 立方体的顶点坐标，纹理坐标</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> GLfloat g_vertex_buffer_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// VAO、VBO的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VAO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint VBO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glGenVertexArrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">VAO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glBindVertexArray</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">VAO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glGenBuffers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">VBO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glBindBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_ARRAY_BUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> VBO1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glBufferData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_ARRAY_BUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">g_vertex_buffer_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> g_vertex_buffer_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_STATIC_DRAW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glEnableVertexAttribArray</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glVertexAttribPointer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FLOAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GLfloat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 纹理数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint texture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glGenTextures</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">texture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glActiveTexture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glBindTexture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> texture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 环绕方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glTexParameteri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_TEXTURE_WRAP_S</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_REPEAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glTexParameteri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_TEXTURE_WRAP_T</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_REPEAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 过滤方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glTexParameteri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_TEXTURE_MIN_FILTER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_NEAREST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glTexParameteri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_TEXTURE_MAG_FILTER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_NEAREST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 加载图片数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">stbi_set_flip_vertically_on_load</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token operator">*</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">stbi_load</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"data/img/test.jpg"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">channels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glTexImage2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TEXTURE_2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_RGB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_RGB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_UNSIGNED_BYTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">stbi_image_free</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 纹理坐标</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glEnableVertexAttribArray</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glVertexAttribPointer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FLOAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GLfloat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GLfloat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glEnable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_DEPTH_TEST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token plain"> argv </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwInit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLFWwindow</span><span class="token operator">*</span><span class="token plain"> window </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">glfwCreateWindow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">512</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">512</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"OpenGL_Tutorial"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwMakeContextCurrent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> window </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">gladLoadGLLoader</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GLADloadproc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">glfwGetProcAddress </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwSwapInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwSetKeyCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> keyboard </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwSetCursorPosCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> motion </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwSetMouseButtonCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mouse </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">prepare</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token function" style="color:rgb(80, 250, 123)">glfwWindowShouldClose</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">glfwPollEvents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">glfwSwapBuffers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">window</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glfwTerminate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>显示效果如图：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/f9fd38ae6d0d360aa8b7cb6c3bfe0f0e.png" alt="1639578757898" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用模板测试功能">使用模板测试功能<a href="https://www.iogl.cn/blog/07.Stencil%E7%94%A8%E6%B3%95#%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E6%B5%8B%E8%AF%95%E5%8A%9F%E8%83%BD" class="hash-link" aria-label="使用模板测试功能的直接链接" title="使用模板测试功能的直接链接">​</a></h3>
<p>加入模板测试功能，流程描述：</p>
<ol>
<li>开启模板测试</li>
<li>清除所有模板值</li>
<li>画一个立方体盒子，将盒子区域的模板值设置可写，值为1</li>
<li>画一个稍大点的盒子(盒子放大1.05倍)，不贴图，fs里直接设置颜色固定值，进行模板测试，模板测试条件为模板值 != 1，设置模板值不可写。</li>
</ol>
<p>具体代码：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> GLFWwindow</span><span class="token operator">*</span><span class="token plain"> window </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 1.开启stencil功能</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glEnable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_STENCIL_TEST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 设置模板值可写，下面的clear GL_STENCIL_BUFFER_BIT操作才能执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glStencilMask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 设置模板测试成功的写入方式为替换，即测试成功，使用glStencilFunc中的ref值写入模板值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glStencilOp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_KEEP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_KEEP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_REPLACE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glClearColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 2.清除深度、模板值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glClear</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> GL_COLOR_BUFFER_BIT </span><span class="token operator">|</span><span class="token plain"> GL_DEPTH_BUFFER_BIT </span><span class="token operator">|</span><span class="token plain"> GL_STENCIL_BUFFER_BIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 3.画立方体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 projection </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">perspective</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">radians</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">45.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.1f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 view </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">lookAt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 model </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">mat4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">mat4 mvp </span><span class="token operator">=</span><span class="token plain"> projection </span><span class="token operator">*</span><span class="token plain"> view </span><span class="token operator">*</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 设置模板值的写入策略，GL_ALWAYS表示无条件写入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glStencilFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_ALWAYS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUseProgram</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">boxProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GLuint mvpId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">glGetUniformLocation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">boxProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"MVP"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUniformMatrix4fv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mvpId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glDrawArrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TRIANGLES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">36</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 4.画描边</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">mat4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 放大盒子为原来的1.05倍</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model </span><span class="token operator">=</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">scale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> glm</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.05</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.05</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.05</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mvp </span><span class="token operator">=</span><span class="token plain"> projection </span><span class="token operator">*</span><span class="token plain"> view </span><span class="token operator">*</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 进行模板测试，只有不等于1的模板值才测试成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glStencilFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_NOTEQUAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 设置模板值不可写，此处无需更新模板值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glStencilMask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0x00</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUseProgram</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">stencilProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mvpId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">glGetUniformLocation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">stencilProgramID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"MVP"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glUniformMatrix4fv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mvpId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GL_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">mvp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">glDrawArrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GL_TRIANGLES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">36</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在的效果：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/88e03e838ed2941bffb00b84a0d956da.png" alt="1639579682967" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>stencil</category>
        </item>
        <item>
            <title><![CDATA[MVP变换坐标]]></title>
            <link>https://www.iogl.cn/blog/06.MVP变换坐标</link>
            <guid>https://www.iogl.cn/blog/06.MVP变换坐标</guid>
            <pubDate>Sun, 12 Dec 2021 17:10:05 GMT</pubDate>
            <description><![CDATA[MVP概念]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mvp概念">MVP概念<a href="https://www.iogl.cn/blog/06.MVP%E5%8F%98%E6%8D%A2%E5%9D%90%E6%A0%87#mvp%E6%A6%82%E5%BF%B5" class="hash-link" aria-label="MVP概念的直接链接" title="MVP概念的直接链接">​</a></h2>
<p>在opengl中，<code>MVP</code>称为模型观察投影矩阵，它是模型（Model）、观察（View）和投影（Projection）矩阵作用在物体上组合作用，用于对物体的坐标系进行变换。</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/a97b8a1c101a53d8bfb26020cc22de2d.png" alt="1639300692250" class="img_ev3q"></p>
<p>如上图所示，物体的坐标系变化过程为：</p>
<ol>
<li>局部坐标系</li>
<li>世界坐标系</li>
<li>观察坐标系</li>
<li>裁剪坐标系</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mvp公式">MVP公式<a href="https://www.iogl.cn/blog/06.MVP%E5%8F%98%E6%8D%A2%E5%9D%90%E6%A0%87#mvp%E5%85%AC%E5%BC%8F" class="hash-link" aria-label="MVP公式的直接链接" title="MVP公式的直接链接">​</a></h2>
<p>$$ MVP=Mprojection⋅Mview⋅Mmodel$$</p>
<p>在shader中用MVP * gl_Position 得到转换后的坐标。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/06.MVP%E5%8F%98%E6%8D%A2%E5%9D%90%E6%A0%87#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<p>在<a href="http://iogl.cn/pages/ogltexture/" target="_blank" rel="noopener noreferrer">OpenGL纹理</a>中，介绍了纹理的使用方法，最终的运行效果为：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/8b0c927d8f7dde56c3955c47c152fc98.png" alt="1637478946876" class="img_ev3q"></p>
<p>修改vertext shader，添加MVP变量</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#version 330 core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 0) in vec3 aPos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 1) in vec2 aTexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uniform mat4 MVP;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">out vec2 TexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gl_Position = MVP * vec4(aPos, 1.0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    TexCoord = aTexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在绘制之前将MVP矩阵传入着色器：</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float) width / (float)height, 0.1f, 100.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm::mat4 view = glm::lookAt(glm::vec3(1,2,3), glm::vec3(0,0,0), glm::vec3(0,1,0));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm::mat4 model = glm::mat4(1.0f);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glm::mat4 mvp = projection * view * model;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint mvpId = glGetUniformLocation(programID, "MVP");</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glUniformMatrix4fv(mvpId, 1, GL_FALSE, &amp;mvp[0][0]);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在的运行效果如下：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/1beb112d4b8acb155e117a0ba0f25ad2.png" alt="1639310527486" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>坐标系</category>
        </item>
        <item>
            <title><![CDATA[computer shader详解]]></title>
            <link>https://www.iogl.cn/blog/10.computer shader详解</link>
            <guid>https://www.iogl.cn/blog/10.computer shader详解</guid>
            <pubDate>Wed, 08 Dec 2021 07:39:25 GMT</pubDate>
            <description><![CDATA[使用方式]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用方式">使用方式<a href="https://www.iogl.cn/blog/10.computer%20shader%E8%AF%A6%E8%A7%A3#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="使用方式的直接链接" title="使用方式的直接链接">​</a></h2>
<ul>
<li>
<p>代码侧调度计算管线任务</p>
<p><code>vkCmdDIspatch(commandBuffer, groupSize.x, groupSize.y, groupSize.z)</code></p>
<p><code>groupSize</code>代表工作组数量(xyz三个方向上)</p>
</li>
<li>
<p>shader侧配置设置</p>
<p><code>layout(local_size_x=6, local_size_y=4) in;</code></p>
<p>设置本地工作组大小，<code>local_size_z</code>未设置取默认值1</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workgroup参数说明">WorkGroup参数说明<a href="https://www.iogl.cn/blog/10.computer%20shader%E8%AF%A6%E8%A7%A3#workgroup%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="WorkGroup参数说明的直接链接" title="WorkGroup参数说明的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/863e1f0932c954536068441fbcf0534f.png" alt="1638971538231" class="img_ev3q"></p>
<p>以上图为例</p>
<ul>
<li>
<p>全局工作组， groupSize.x =3 , groupSize.y=4, groupSize.z=8</p>
</li>
<li>
<p><code>gl_NumWorkGroups</code> ：(3，4，8)，全局工作组大小。</p>
</li>
<li>
<p><code>gl_WorkGroupSize</code> ：(6，4，1)，本地工作组大小。</p>
</li>
<li>
<p><code>gl_WorkGroupID</code> ：（2，2，4），本地工作组在全局工作组中的位置。</p>
</li>
<li>
<p><code>gl_LocalInvocationID</code> ：（5，3，0），计算单元在本地工作组的位置。</p>
</li>
<li>
<p><code>gl_GlobalInvocationID</code> ：（17，11，4），计算单元在全局工作自的位置，gl_WorkGroupID * gl_WorkGroupSize + gl_LocalInvocationID</p>
</li>
<li>
<p><code>gl_LocalInvocationIndex</code> ：23，计算单元在本地工作组的索引，gl_LocalInvocationID.z * gl_WorkGroupSize.x * gl_WorkGroupSize.y + gl_LocalInvocationID.y * gl_WorkGroupSize.x +gl_LocalInvocationID.x;</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="subgroup参数说明">Subgroup参数说明<a href="https://www.iogl.cn/blog/10.computer%20shader%E8%AF%A6%E8%A7%A3#subgroup%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="Subgroup参数说明的直接链接" title="Subgroup参数说明的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/c349681166b76d3a822788989b02ac22.png" alt="1638972921886" class="img_ev3q"></p>
<p>如果一个本地工作组分成如上图所示的subgroup，则有如下参数</p>
<ul>
<li>
<p><code>gl_NumSubgroups</code>  ：8，本地工作组内的子组数</p>
</li>
<li>
<p><code>gl_SubgroupID</code>  ：[0，7]，本地工作组内子组的ID，范围[0，gl_NumSubgroups)</p>
</li>
<li>
<p><code>gl_SubgroupSize</code>  ：32，子组的容量大小</p>
</li>
<li>
<p><code>gl_SubgroupInvocationID</code>  ：[0，31]，子组内计算单元的ID，范围[0，gl_SubgroupSize)</p>
</li>
</ul>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>computer shader</category>
        </item>
        <item>
            <title><![CDATA[OpenGL纹理]]></title>
            <link>https://www.iogl.cn/blog/05.OpenGL纹理</link>
            <guid>https://www.iogl.cn/blog/05.OpenGL纹理</guid>
            <pubDate>Sun, 21 Nov 2021 13:57:08 GMT</pubDate>
            <description><![CDATA[简介]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="https://www.iogl.cn/blog/05.OpenGL%E7%BA%B9%E7%90%86#%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2>
<p>opengl纹理简单来说就是贴图，像2D游戏，就是用大量的贴图拼起来组成丰富多彩的画面。下面我们详细地描述一下使用纹理的代码方式。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/05.OpenGL%E7%BA%B9%E7%90%86#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<p>顶点着色器输入两组坐标，顶点坐标和纹理坐标，纹理坐标直接传递给片段着色器</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//02.Texture.vs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#version 330 core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 0) in vec3 aPos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">layout (location = 1) in vec2 aTexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">out vec2 TexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gl_Position = vec4(aPos, 1.0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    TexCoord = aTexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>片段着色器定义一个纹理采样器text1，它与代码中绑定的TEXTURE0关联，使用传入的纹理坐标采样</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//02.Texture.fs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#version 330 core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">in vec2 TexCoord;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uniform sampler2D tex1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">out vec4 FragColor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FragColor = texture(tex1, TexCoord);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>实现代码逻辑</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint programID = LoadShaders( "data/shader/02.Texture.vs", "data/shader/02.Texture.fs" );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glUseProgram(programID);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 顶点、纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">const GLfloat g_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -0.5f, -0.5f, 0.0f, 0.0f, 0.0f,    // 左下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.5f, -0.5f, 0.0f,  1.0f, 0.0f,    // 右下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -0.5f, 0.5f, 0.0f,  0.0f, 1.0f,    // 左上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.5f, 0.5f, 0.0f,   1.0f, 1.0f     // 右上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 顶点索引</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsigned int indices[] = {0, 1, 2,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          1, 2, 3};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// VAO1、VBO1、EBO1的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VAO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint EBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenVertexArrays(1, &amp;VAO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindVertexArray(VAO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ARRAY_BUFFER, VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;EBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 纹理数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint texture;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenTextures(1, &amp;texture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glActiveTexture(GL_TEXTURE0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindTexture(GL_TEXTURE_2D, texture);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 环绕方式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 过滤方式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 加载图片数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int width, height, channels;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 图像坐标系与纹理坐标系相反，翻转y轴</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stbi_set_flip_vertically_on_load(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsigned char* data = stbi_load("data/img/test.jpg", &amp;width, &amp;height, &amp;channels, 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stbi_image_free(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 纹理坐标</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableVertexAttribArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)(3 * sizeof(GLfloat)));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行效果：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/8b0c927d8f7dde56c3955c47c152fc98.png" alt="1637478946876" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="环绕方式">环绕方式<a href="https://www.iogl.cn/blog/05.OpenGL%E7%BA%B9%E7%90%86#%E7%8E%AF%E7%BB%95%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="环绕方式的直接链接" title="环绕方式的直接链接">​</a></h2>
<p>通过设置<code>GL_TEXTURE_WRAP_</code>参数来设置环绕方式</p>
<ul>
<li>
<p><code>GL_REPEAT</code>: 超出纹理范围的坐标整数部分被忽略，形成重复效果。</p>
</li>
<li>
<p><code>GL_MIRRORED_REPEAT</code>: 超出纹理范围的坐标整数部分被忽略，但当整数部分为奇数时进行取反，形成镜像效果。</p>
</li>
<li>
<p><code>GL_CLAMP_TO_EDGE</code>: 超出纹理范围的坐标被截取成0和1，形成纹理边缘延伸的效果。</p>
</li>
<li>
<p><code>GL_CLAMP_TO_BORDER</code>:  超出纹理范围的部分被设置为边缘色。</p>
</li>
</ul>
<p>如果将纹理坐标改成如下:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const GLfloat g_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -0.5f, -0.5f, 0.0f, 0.0f, 0.0f,    // 左下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.5f, -0.5f, 0.0f,  2.0f, 0.0f,    // 右下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -0.5f, 0.5f, 0.0f,  0.0f, 2.0f,    // 左上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.5f, 0.5f, 0.0f,   2.0f, 2.0f     // 右上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>不同环绕方式对应的效果:</p>
<p>GL_REPEAT</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/8584304f0436687612292cb33ae09398.png" alt="11" class="img_ev3q"></p>
<hr>
<p>GL_MIRRORED_REPEAT</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/eb72316da29dc70f706915510134e249.png" alt="222" class="img_ev3q"></p>
<hr>
<p>GL_CLAMP_TO_EDGE</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/4c7b53d0f1df36e720ff66a1055eaf64.png" alt="333" class="img_ev3q"></p>
<hr>
<p>GL_CLAMP_TO_BORDER</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/99d5651bbf052ab5d6a9d51e68755122.png" alt="444" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>纹理</category>
        </item>
        <item>
            <title><![CDATA[OpenGL中的坐标系统]]></title>
            <link>https://www.iogl.cn/blog/04.OpenGL中的坐标系统</link>
            <guid>https://www.iogl.cn/blog/04.OpenGL中的坐标系统</guid>
            <pubDate>Sat, 20 Nov 2021 21:16:27 GMT</pubDate>
            <description><![CDATA[常见的坐标系统]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见的坐标系统">常见的坐标系统<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F" class="hash-link" aria-label="常见的坐标系统的直接链接" title="常见的坐标系统的直接链接">​</a></h2>
<p>opengl的坐标系用一张图概要说明</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/2f524724f059a8a20ae0c933e541a0fc.png" alt="1637416960591" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="世界坐标系">世界坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E4%B8%96%E7%95%8C%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="世界坐标系的直接链接" title="世界坐标系的直接链接">​</a></h3>
<p>在 OpenGL 中，3D世界坐标系采用的是右手笛卡尔坐标系。</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/ecb4a55ead119d5928c36cddb0999b5a.png" alt="1637416191561" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="屏幕坐标系">屏幕坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E5%B1%8F%E5%B9%95%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="屏幕坐标系的直接链接" title="屏幕坐标系的直接链接">​</a></h3>
<p>屏幕坐标系，大部分是以左上角为原点（0，0）的。 代表的操作系统有Windows，Android，Symbian，iOS 的Core Graphics。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opengl-2d坐标系">OpenGL 2D坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#opengl-2d%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="OpenGL 2D坐标系的直接链接" title="OpenGL 2D坐标系的直接链接">​</a></h3>
<p>OpenGL绘制时采用NDC坐标系，NDC就是设备标准化坐标系 ， 原点在屏幕中心，坐标范围[-1，1]</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/bb5f6489c26630c49f7215bda6d21ab8.png" alt="1637415339038" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="窗口坐标系">窗口坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E7%AA%97%E5%8F%A3%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="窗口坐标系的直接链接" title="窗口坐标系的直接链接">​</a></h3>
<p>也叫视口坐标系， 原点在左下角，X、Y 轴分别向右和向上，采用和屏幕坐标一样的像素计算长度。 在 OpenGL 中，我们使用接口 glViewport 设置视口</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/e9e646c59ba2e6efd398d8d6765187c1.png" alt="1637416580747" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="纹理坐标系">纹理坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E7%BA%B9%E7%90%86%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="纹理坐标系的直接链接" title="纹理坐标系的直接链接">​</a></h3>
<p>纹理坐标的原点在纹理左下角，<code>x</code>轴向右，<code>y</code>轴向上，<code>x</code>和<code>y</code>的取值范围都是0到1。</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/58e9b249068cf37e5ad5e1e93056ebb4.png" alt="1637415544184" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片坐标系">图片坐标系<a href="https://www.iogl.cn/blog/04.OpenGL%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F#%E5%9B%BE%E7%89%87%E5%9D%90%E6%A0%87%E7%B3%BB" class="hash-link" aria-label="图片坐标系的直接链接" title="图片坐标系的直接链接">​</a></h3>
<p>图片坐标系的原点在图片左上角，<code>x</code>轴向右，<code>y</code>轴向下，<code>x</code>和<code>y</code>的取值范围都是0到对应的图片宽高。</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/4441ece5077a11c6903dfbaf0adc7f89.png" alt="1637415525917" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
            <category>坐标系</category>
        </item>
        <item>
            <title><![CDATA[浅谈VAO、VBO、VEO]]></title>
            <link>https://www.iogl.cn/blog/03.浅谈VAO、VBO、VEO</link>
            <guid>https://www.iogl.cn/blog/03.浅谈VAO、VBO、VEO</guid>
            <pubDate>Thu, 18 Nov 2021 07:35:01 GMT</pubDate>
            <description><![CDATA[概念说明]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概念说明">概念说明<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E6%A6%82%E5%BF%B5%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="概念说明的直接链接" title="概念说明的直接链接">​</a></h2>
<p>在opengl中，VAO,VBO,VEO都是存储顶点数据的缓冲对象，解释如下：</p>
<ul>
<li>顶点数组对象：Vertex Array Object，VAO</li>
<li>顶点缓冲对象：Vertex Buffer Object，VBO</li>
<li>索引缓冲对象：Element Buffer Object，EBO或Index Buffer Object，IBO</li>
</ul>
<p>这三个缓冲对象的关系图：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/3c91e78070193e053a8588f8f91c6939.png" alt="1635954045960" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="顶点数组对象vao">顶点数组对象(VAO)<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E9%A1%B6%E7%82%B9%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1vao" class="hash-link" aria-label="顶点数组对象(VAO)的直接链接" title="顶点数组对象(VAO)的直接链接">​</a></h3>
<p>顶点数组对象(Vertex Array Object, VAO)可以像顶点缓冲对象那样被绑定，任何随后的顶点属性调用都会储存在这个VAO中。这样的好处就是，当配置顶点属性指针时，你只需要将那些调用执行一次，之后再绘制物体的时候只需要绑定相应的VAO就行了。这使在不同顶点数据和属性配置之间切换变得非常简单，只需要绑定不同的VAO就行了。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="顶点缓冲对象vbo">顶点缓冲对象(VBO)<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E9%A1%B6%E7%82%B9%E7%BC%93%E5%86%B2%E5%AF%B9%E8%B1%A1vbo" class="hash-link" aria-label="顶点缓冲对象(VBO)的直接链接" title="顶点缓冲对象(VBO)的直接链接">​</a></h3>
<p>我们通过顶点缓冲对象(Vertex Buffer Objects, VBO)管理内存，它会在GPU内存(通常被称为显存)中储存大批顶点。使用这些缓冲对象的好处是我们可以一次性的发送一大批数据到显卡上，而不是每个顶点发送一次。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="索引缓冲对象ebo">索引缓冲对象(EBO)<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E7%B4%A2%E5%BC%95%E7%BC%93%E5%86%B2%E5%AF%B9%E8%B1%A1ebo" class="hash-link" aria-label="索引缓冲对象(EBO)的直接链接" title="索引缓冲对象(EBO)的直接链接">​</a></h3>
<p>和顶点缓冲对象一样，EBO也是一个缓冲，它专门储存索引，OpenGL调用这些顶点的索引来决定该绘制哪个顶点。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三者关系">三者关系<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E4%B8%89%E8%80%85%E5%85%B3%E7%B3%BB" class="hash-link" aria-label="三者关系的直接链接" title="三者关系的直接链接">​</a></h2>
<p><strong>可以理解为VBO就是显存中的一个存储区域，可以保持大量的顶点属性信息</strong>。并且可以开辟很多个VBO，每个VBO在OpenGL中有它的唯一标识ID，这个ID对应着具体的VBO的显存地址，通过这个ID可以对特定的VBO内的数据进行存取操作。</p>
<p><strong>VAO是一个保存了所有顶点数据属性的状态结合，它存储了顶点数据的格式以及顶点数据所需的VBO对象的引用</strong>。VAO本身并没有存储顶点的相关属性数据，这些信息是存储在VBO中的，VAO相当于是对很多个VBO的引用，把一些VBO组合在一起作为一个对象统一管理。</p>
<p><strong>EBO中存储的内容就是顶点位置的索引indices，EBO跟VBO类似，也是在显存中的一块内存缓冲器</strong>，只不过EBO保存的是顶点的索引。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="示例代码的直接链接" title="示例代码的直接链接">​</a></h2>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const GLfloat g_vertex_buffer_data[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -1.0f, -1.0f, 0.0f,     // 左下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    1.0f, -1.0f, 0.0f,      // 右下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.0f, 0.0f, 0.0f,       // 中间点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -1.0f, 1.0f, 0.0f,      // 左上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    1.0f, 1.0f, 0.0f        // 右上角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsigned int indices1[] = {0, 1, 2};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsigned int indices2[] = {2, 3, 4};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// VAO1、VBO1、EBO1的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VAO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint EBO1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenVertexArrays(1, &amp;VAO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindVertexArray(VAO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ARRAY_BUFFER, VBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;EBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices1), indices1, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// VAO2、VBO2、EBO2的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VAO2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint VBO2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GLuint EBO2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenVertexArrays(1, &amp;VAO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindVertexArray(VAO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ARRAY_BUFFER, VBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glGenBuffers(1, &amp;EBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices2), indices2, GL_STATIC_DRAW);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glClearColor( 0, 0, 0.4, 0 );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 绑定VAO1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindVertexArray(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 绑定VAO2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glBindVertexArray(2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, 0);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上面的示例代码，首先设置好VAO1、VAO2的缓冲数据，VAO中分别绑定对应的VBO、EBO，后面在绘制前直接绑定对应的VAO即可。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简单的绘制方式">简单的绘制方式<a href="https://www.iogl.cn/blog/03.%E6%B5%85%E8%B0%88VAO%E3%80%81VBO%E3%80%81VEO#%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%98%E5%88%B6%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="简单的绘制方式的直接链接" title="简单的绘制方式的直接链接">​</a></h2>
<p>如果给了一组顶点信息，可使用下面的两种方式绘制，两种方式是等效的：</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const GLfloat points[] = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -1.0f, -1.0f, 0.0f,     // 左下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    1.0f, -1.0f, 0.0f,      // 右下角</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0.0f, 0.0f, 0.0f,       // 中间点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 方式一</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, points);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDrawArrays(GL_TRIANGLES, 0, 3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDisableVertexAttribArray(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 方式二</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glEnableClientState(GL_VERTEX_ARRAY);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glVertexPointer(3, GL_FLOAT, 0, points);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDrawArrays(GL_TRIANGLES, 0, 3);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">glDisableClientState(GL_VERTEX_ARRAY);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
        </item>
        <item>
            <title><![CDATA[收集的OpenGL资源]]></title>
            <link>https://www.iogl.cn/blog/01.收集的OpenGL资源</link>
            <guid>https://www.iogl.cn/blog/01.收集的OpenGL资源</guid>
            <pubDate>Tue, 02 Nov 2021 22:54:31 GMT</pubDate>
            <description><![CDATA[收集的OpenGL资源]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="收集的opengl资源">收集的OpenGL资源<a href="https://www.iogl.cn/blog/01.%E6%94%B6%E9%9B%86%E7%9A%84OpenGL%E8%B5%84%E6%BA%90#%E6%94%B6%E9%9B%86%E7%9A%84opengl%E8%B5%84%E6%BA%90" class="hash-link" aria-label="收集的OpenGL资源的直接链接" title="收集的OpenGL资源的直接链接">​</a></h2>
<p><a href="https://www.khronos.org/opengl/wiki/Getting_Started" target="_blank" rel="noopener noreferrer">OpenGL官方指引</a></p>
<p><a href="http://www.zwqxin.com/" target="_blank" rel="noopener noreferrer">ZwqXin</a></p>
<p><a href="https://learnopengl-cn.github.io/" target="_blank" rel="noopener noreferrer">LearnOpenGL中文教程</a></p>
<p><a href="https://developer.nvidia.com/gpugems/gpugems/contributors" target="_blank" rel="noopener noreferrer">NVIDIA GPU Gems</a></p>
<p><a href="https://www.cnblogs.com/hackpig/tag/OpenGL/" target="_blank" rel="noopener noreferrer">猪悟能'S博客</a></p>
<p><a href="https://blog.csdn.net/jxw167/column/info/14637" target="_blank" rel="noopener noreferrer">OpenGL核心技术</a></p>
<p><a href="https://github.com/sumcai/GLSL-Card" target="_blank" rel="noopener noreferrer">GLSL中文手册</a></p>
<p><a href="https://pbr-book.org/3ed-2018/contents" target="_blank" rel="noopener noreferrer">Physically Based Rendering</a></p>
<p><a href="https://user.xmission.com/~nate/tutors.html" target="_blank" rel="noopener noreferrer">Tutors example</a></p>
<p>未完待续~</p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
        </item>
        <item>
            <title><![CDATA[搭建OpenGL开发环境]]></title>
            <link>https://www.iogl.cn/blog/02.搭建OpenGL开发环境</link>
            <guid>https://www.iogl.cn/blog/02.搭建OpenGL开发环境</guid>
            <pubDate>Mon, 01 Nov 2021 23:56:39 GMT</pubDate>
            <description><![CDATA[从搭建环境开始]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="从搭建环境开始">从搭建环境开始<a href="https://www.iogl.cn/blog/02.%E6%90%AD%E5%BB%BAOpenGL%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83#%E4%BB%8E%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%BC%80%E5%A7%8B" class="hash-link" aria-label="从搭建环境开始的直接链接" title="从搭建环境开始的直接链接">​</a></h2>
<p>先从搭建opengl环境开始。任何语言的学习都从Hello World开始，学习OpenGL也一样，不过我们不是打印Hello World，而是通过OpenGL画出第一个三角形。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="准备工作">准备工作<a href="https://www.iogl.cn/blog/02.%E6%90%AD%E5%BB%BAOpenGL%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" class="hash-link" aria-label="准备工作的直接链接" title="准备工作的直接链接">​</a></h2>
<p>网上有许多入门教程，但是我觉得这些教程都不够精简，光是准备环境都要转腾一番，出于前人栽树后人乘凉的原则，我准备了一个最简便的配置工程，使用CLion或者Visual Studio打开即可运行。我们只需关注display函数中OpenGL的绘制过程即可，无需关注其他如窗口创建、鼠标键盘控制等操作。</p>
<p>项目地址：<a href="https://gitee.com/sumcai/opengl_tutorial" target="_blank" rel="noopener noreferrer">https://gitee.com/sumcai/opengl_tutorial</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="绘制第一个三角形">绘制第一个三角形<a href="https://www.iogl.cn/blog/02.%E6%90%AD%E5%BB%BAOpenGL%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83#%E7%BB%98%E5%88%B6%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%B8%89%E8%A7%92%E5%BD%A2" class="hash-link" aria-label="绘制第一个三角形的直接链接" title="绘制第一个三角形的直接链接">​</a></h2>
<p>使用CLion打开工程，toolchain配置好MinGW，直接运行即可，如果使用visual studio，需使用Cmake生成解决方案后再运行，具体步骤自行搜索。</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/514c22c19a25ebfba5f03869b8ab00b2.png" alt="1635868749462" class="img_ev3q"></p>
<p>第一个三角形运行效果：</p>
<p><img decoding="async" loading="lazy" src="https://objectstorage.ap-osaka-1.oraclecloud.com/n/ax0kqy8quzyr/b/bucket-blog/o/2022/04/b0fa5c33043e0581a47ed56e264148c7.png" alt="1635868749462" class="img_ev3q"></p>]]></content:encoded>
            <author>sumcai@163.com (苏明才)</author>
            <category>opengl基础</category>
        </item>
    </channel>
</rss>